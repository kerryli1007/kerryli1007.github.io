<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.8.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"kerryli1007.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="AI/思考/学习">
<meta property="og:type" content="website">
<meta property="og:title" content="一颗西蓝花🥦">
<meta property="og:url" content="http://kerryli1007.github.io/index.html">
<meta property="og:site_name" content="一颗西蓝花🥦">
<meta property="og:description" content="AI/思考/学习">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一颗西蓝花🥦">
<meta name="twitter:description" content="AI/思考/学习">

<link rel="canonical" href="http://kerryli1007.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>一颗西蓝花🥦</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">一颗西蓝花🥦</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/07/08/20210708-于黑暗中作光明/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/08/20210708-于黑暗中作光明/" class="post-title-link" itemprop="url">于黑暗中作光明</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-07-08 00:00:00 / 修改时间：00:30:14" itemprop="dateCreated datePublished" datetime="2021-07-08T00:00:00+08:00">2021-07-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index"><span itemprop="name">工作</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>如果你觉得四周黑暗，那么说明你自己不是一盏明灯。</p>
<h1 id="一、两则对话"><a href="#一、两则对话" class="headerlink" title="一、两则对话"></a>一、两则对话</h1><p>分享和老板的对话。</p>
<p>【第一则】</p>
<pre><code>- 老板：你的目标就是变得更牛逼。
- 我反问：怎么才能算是牛逼一些，如何才能牛逼一些？
- 老板答：你靠自己就能把项目run下来，其他人都是你的工具人。
</code></pre><p>【第二则】</p>
<pre><code>- 我：项目总是不一帆风顺。
- 老板：怕啥，总有路的。
</code></pre><p>这两则对话，非常简练。但于我，非常inspring。<br>一是让我继续保持乐观的态度，车到山前必有路；二是让我开始意识到我的目标可以非常简单，就是实现一个又一个的目标，实现目标的过程中，其他人都是我的工具人，都是我的资源。</p>
<h1 id="二、于暗夜中为作光明"><a href="#二、于暗夜中为作光明" class="headerlink" title="二、于暗夜中为作光明"></a>二、于暗夜中为作光明</h1><p>最近为团队做了一些贡献，帮助团队在当前较混沌的时刻，找到了一些确定的事，以及接下来的前进方向。</p>
<p>能为团队做这样的贡献，分外荣幸，希望能多为团队做贡献。于暗夜中为作光明。</p>
<p>备注：我自己的笔记是记录了这件事的详细过程，发布在Blog上，因此做了隐藏。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/05/30/推荐策略产品必备技能之推荐算法原理（上）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/30/推荐策略产品必备技能之推荐算法原理（上）/" class="post-title-link" itemprop="url">推荐策略产品必备技能之推荐算法原理（上）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-05-30 00:00:00 / 修改时间：19:39:15" itemprop="dateCreated datePublished" datetime="2021-05-30T00:00:00+08:00">2021-05-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/推荐策略产品必备技能/" itemprop="url" rel="index"><span itemprop="name">推荐策略产品必备技能</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>工业界的推荐算法链路，通常是召回、粗排、精排。</p>
<h1 id="一、召回"><a href="#一、召回" class="headerlink" title="一、召回"></a>一、召回</h1><p>在召回章节，我的构思书写思路为</p>
<ol>
<li>多路召回</li>
<li>每路召回的具体实现</li>
<li>召回与过滤</li>
</ol>
<p>推荐系统的召回阶段是根据用户的数据（静态数据，历史行为数据），为用户在海量的候选集中粗选一批待推荐的内容。<br>在实际应用中，召回模块一般都是多路召回的架构。这样设计主要出于如下几点的考虑</p>
<ol>
<li>考虑用户层面。</li>
<li>考虑系统层面。增强系统的鲁棒性，部分召回实效，其余召回队列正常工作，不会导致整个召回层失效。</li>
<li>考虑多样性内容分发。图文、视频、小视频，精准、试探、时效各占一定比例。召回目标的多元化。</li>
<li>可解释性，某一部分是有明确的推荐理由的。</li>
</ol>
<p>比如京东电商推荐的召回</p>
<p><img src="https://kerryli1007.github.io/images/推荐策略产品必备技能之推荐算法原理（上）/1.png" alt></p>
<p>这些召回规则对于特定的场景都是通用的，但是问题来了，有的用户是有一些反馈记录的，比如截图一个抖音主页推荐，我对一些推荐的视频是有明确的负反馈的，如果这类视频再推荐给我，是非常伤害用户体验的，所以这个阶段，会进行一个过滤。</p>
<p>过滤之后，会对召回出来的物料进行模型排序。</p>
<p>在上篇，主要讲一下召回。每一路召回的目标是不一样的。</p>
<p>比如在电商场景，常见的召回有</p>
<ul>
<li>基于内容的召回</li>
<li>协同过滤召回</li>
<li>基于模型的召回</li>
<li>DSSM召回</li>
</ul>
<h2 id="1-1-基于内容的召回"><a href="#1-1-基于内容的召回" class="headerlink" title="1.1 基于内容的召回"></a>1.1 基于内容的召回</h2><p>基于内容推荐的基本思想是为用户推荐与他感兴趣的项目内容相似的项目，即发掘用户曾经喜欢过项目的特征，并推荐类似的项目。</p>
<p>基于内容的推荐系统主要包括：项目建模、用户建模、产生推荐。</p>
<p>一般来说，物品都有一些关于内容的分类，电影有战争、科幻、爱情等。基于内容的推荐，就是根据这些物品的内容属性和用户历史评分或操作记录，计算出用户对不同内容的爱好程度，再根据这些爱好推荐其他相同属性的物品。</p>
<p>内容推荐的基本方法有如下4个步骤：<br>1）内容表征（item representation）：为每个item都抽取出一些特征来表示此item；<br>2）用户偏好计算：利用过去一个用户的显式评分或隐式操作，计算用户不同特征上的偏好分数。<br>3）内容召回：将待推荐物品的特征与用户偏好得分相匹配，取出用户最有可能喜欢的物品池<br>4）物品排序：按用户偏好召回物品池</p>
<p><strong>步骤一：内容表征</strong><br>从文章内容中抽取出一些代表他们的属性，最常用的方法就是利用出现在一篇文章中的词来代表这篇文章。item会有一些属性对它进行描述，这些属性通常分为两种：结构化与非结构化信息。</p>
<p>比如电影类别特征，例如可选的电影类别有：爱情、剧情、科幻、战争、中国、日本、韩国、美国，合计8个类别。《银河护卫队》同时具有科幻和美国2个内容特征，那么它的结构话特征可用一个8位的二进制数表示如下：</p>
<p>对于一些非结构化的内容，需要进行处理，提取出相对应的特征。</p>
<p>比如对电影，具有如下字段：电影ID（id）、标题（title）、上映时间（year）、电影类型/标签（genre，基因）、指示（indicators）、indicators数组的数量（numFields）：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> <span class="string">"id"</span>: <span class="string">"65006"</span>,</span><br><span class="line"> <span class="string">"title"</span>: <span class="string">"Impulse"</span>,</span><br><span class="line"> <span class="string">"year"</span>: <span class="string">"2008"</span>,</span><br><span class="line"> <span class="string">"genre"</span>: [<span class="string">"Mystery"</span>,<span class="string">"Thriller"</span>],</span><br><span class="line"> <span class="string">"indicators"</span>: [<span class="string">"154"</span>,<span class="string">"272"</span>,”<span class="number">154</span><span class="string">","</span><span class="number">308</span><span class="string">", "</span><span class="number">535</span><span class="string">", "</span><span class="number">583</span><span class="string">", "</span><span class="number">593</span><span class="string">", "</span><span class="number">668</span><span class="string">", "</span><span class="number">670</span><span class="string">", "</span><span class="number">680</span><span class="string">", "</span><span class="number">702</span><span class="string">", "</span><span class="number">745</span><span class="string">"],</span></span><br><span class="line"><span class="string"> "</span>numFields<span class="string">": 12</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>一般这些数据都是放在es中，便于索引。关于这些数据在es中，如何做索引的，暂时还没有进一步做研究，后续补充。</p>
<p><strong>步骤二：用户偏好计算</strong>，比如在电影场景，我们可以分析用户西蓝花在过去一周的行为。来计算user_behavior_profile。<br><strong>步骤三：内容召回</strong>，根据用户偏好召回对应内容。<br><strong>步骤四：物品排序</strong>，最后进行排序，</p>
<p>基于内容的推荐方法，优点</p>
<ol>
<li>物品没有冷启动问题，因为物品的内容特征不依赖用户数据</li>
<li>原理简单，易于定位问题.</li>
</ol>
<p>缺点：</p>
<ol>
<li>依赖于物品的meta信息，如果物品的信息较少，则无法做出推荐</li>
</ol>
<h2 id="3-2-协同过滤"><a href="#3-2-协同过滤" class="headerlink" title="3.2 协同过滤"></a>3.2 协同过滤</h2><p>协同过滤做的是一件什么事？协同过滤根据用户的历史数据，计算用户之间的相似度，计算item之间的相似度，然后基于这些相似度给用户做推荐。协同过滤强依赖用户行为！协同过滤强依赖用户行为！协同过滤强依赖用户行为！</p>
<p>协同过滤分为基于用户的协同过滤和基于物品的协同过滤。</p>
<p>协同过滤的思想：<br>1）抽象一点，物以类聚，人以群分。<br>2）具体一点，西蓝花和短短都很喜欢健身，也都很喜欢好看的legging和运动背心，短短买了一件新款legging，西蓝花也有很大可能喜欢。</p>
<h3 id="3-2-1-用户协同过滤（user-to-user-collaborative-filtering）"><a href="#3-2-1-用户协同过滤（user-to-user-collaborative-filtering）" class="headerlink" title="3.2.1 用户协同过滤（user-to-user collaborative filtering）"></a>3.2.1 用户协同过滤（user-to-user collaborative filtering）</h3><p><img src="https://kerryli1007.github.io/images/推荐策略产品必备技能之推荐算法原理（上）/2.png" alt><br>上述截图页面，就是一个典型的用户协同过滤页面，购买过《深度学习推荐系统》的人还购买过什么。<br>一点题外话，仔细分析一下这个推荐页面，可以发现这个推荐是没有经过业务逻辑处理的。</p>
<p>原因有2:<br>1）《深度学习推荐系统》是我目前已经加购到购物车的商品；<br>2）《智能搜索和推荐系统：原理、算法与应用》《推荐系统与深度学习：新时代技术新未来》是我过去两周才购买了的商品。</p>
<p>不过，或许京东推荐团队有其他考虑～</p>
<p>用户协同过滤更详细流程：<br>1）找到和目标推荐用户相似的用户群A；<br>2）找到用户群A购买的商品集合B；<br>3）从商品集合B中减目标用户已经购买过的商品，得到C；<br>4）计算商品合计C中商品，目标用户的点击率；<br>5）最后添加一些业务逻辑规则</p>
<p>比如豆瓣电影的“喜欢这部电影的人也喜欢”</p>
<p><img src="https://kerryli1007.github.io/images/推荐策略产品必备技能之推荐算法原理（上）/3.png" alt></p>
<h3 id="3-2-2-物品协同过滤（item-to-item-collaborative-filtering）"><a href="#3-2-2-物品协同过滤（item-to-item-collaborative-filtering）" class="headerlink" title="3.2.2 物品协同过滤（item-to-item collaborative filtering）"></a>3.2.2 物品协同过滤（item-to-item collaborative filtering）</h3><p>物品协同过滤的核心是给用户推荐那些和他们喜欢的物品相似的物品。</p>
<p><img src="https://kerryli1007.github.io/images/推荐策略产品必备技能之推荐算法原理（上）/4.png" alt></p>
<p>比如当当网的经常一起购买的商品。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/05/26/推荐策略产品必备技能之推荐系统框架（下）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/26/推荐策略产品必备技能之推荐系统框架（下）/" class="post-title-link" itemprop="url">推荐策略产品必备技能之推荐系统框架（下）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-26 00:00:00" itemprop="dateCreated datePublished" datetime="2021-05-26T00:00:00+08:00">2021-05-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-06 00:30:56" itemprop="dateModified" datetime="2021-07-06T00:30:56+08:00">2021-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/推荐策略产品必备技能/" itemprop="url" rel="index"><span itemprop="name">推荐策略产品必备技能</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在上一篇，我们聊了推荐系统框架是怎么样一回事，在本篇，我们来学习一下数据流。</p>
<h2 id="一、概括"><a href="#一、概括" class="headerlink" title="一、概括"></a>一、概括</h2><p>为什么要了解数据流？</p>
<p>对于一款非常复杂的产品，比如像推荐系统这块由多个模块组成的产品，只有了解了其数据流，才能知道这个系统是如何运作的。</p>
<p>对于产品经理自身而言，只有了解了整体数据流，才能增强自己对复杂产品设计的把控能力。</p>
<h2 id="二、推荐系统数据流"><a href="#二、推荐系统数据流" class="headerlink" title="二、推荐系统数据流"></a>二、推荐系统数据流</h2><h3 id="1-背景Brief"><a href="#1-背景Brief" class="headerlink" title="1. 背景Brief"></a>1. 背景Brief</h3><p>要了解推荐系统的数据流，首先需要知道，对于一个推荐系统，主要的数据模块。可以将其抽象成3个模块：用户数据、物料数据、用户行为。</p>
<h3 id="2-推荐系统目标"><a href="#2-推荐系统目标" class="headerlink" title="2. 推荐系统目标"></a>2. 推荐系统目标</h3><p>对于一个推荐系统，它的目标是什么？通过两个case来了解。</p>
<p><strong>1）Case 1：资讯场景</strong></p>
<p>比如资讯场景业务目标是点击率。点击率的计算逻辑 = click / show。</p>
<p>那为了提升点击率，我们需要哪些数据实现目标？</p>
<ul>
<li>静态数据：用户表、物料表。</li>
<li>用户行为数据：用户行为数据。</li>
</ul>
<p>聚焦到用户行为数据，如何定义哪些是正样本、哪些是负样本。</p>
<p><img src="https://kerryli1007.github.io/images/推荐策略产品必备技能之推荐系统框架（下）/1.jpg" alt></p>
<p>需要注意的是，在行为数据定义时候（样本定义时候），经常出现的几个show虚报的问题：</p>
<ol>
<li>推荐结果即show。推荐结果即show的意思是，比如一个相关推荐场景，后台服务器一次给出的预测结果是10条数据，客户端只展现了4条。为了图方便，客户的上报show的逻辑是将所有的返回推荐结果都上报为show。</li>
<li>加载即show。在信息流场景，往往需要预加载。但是很多预加载的item，实际上尚未被展示。客户的埋点逻辑是加载即上报show，因此会导致show虚高。</li>
<li>信息流上下滑动。在信息流场景，还经常出现的一个问题是，用户经常上下刷动，所以同一物料会有多次曝光，建议上报时候做去重设置。</li>
</ol>
<p><strong>2）Case 2：小视频场景</strong></p>
<p>比如小视频场景，建模目标是完播率，即视频的播放时长/视频的总时长。</p>
<h3 id="3-推荐系统如何实现业务目标"><a href="#3-推荐系统如何实现业务目标" class="headerlink" title="3. 推荐系统如何实现业务目标"></a>3. 推荐系统如何实现业务目标</h3><p>将推荐系统实现业务目标拆分成两条数据流来理解，在线数据流和离线数据流。</p>
<p><strong>1）在线数据流</strong></p>
<p>在线数据流是指一个请求进入到推荐系统到给出预估结果的流程，参考下述示例图。</p>
<p>接着进一步了解在线数据流。</p>
<p>用户来到APP，打开APP，这个时候前端会像服务器后端发送请求，接着服务器后端会像推荐系统（SaaS服务）发送请求。</p>
<p>推荐服务接受到这个请求，会先进行load balance，接着后端处理，在后端处理分为算法和规则，算法即召回和排序，规则即rerank。</p>
<p>根据2.2的描述，我们知道，对于一个推荐系统来说，都有其特定的目标，当我们完成目标确认后，比如提升点击率或者完播率。</p>
<p>接着就可以开始建模了。假设模型已经ready。来看一下推荐系统的在线流程～</p>
<p><img src="https://kerryli1007.github.io/images/推荐策略产品必备技能之推荐系统框架（下）/2.jpg" alt></p>
<ul>
<li>召回（Recall）：召回的作用是从整个物料库中，通过某一种/多种策略，快速召回一小批物料，供后续模型打分使用。</li>
<li>排序（Rank）：排序是将前一个阶段召回的物料进行模型排序。</li>
<li>重排（Rerank）</li>
</ul>
<p>重排是什么？</p>
<p>重排是基于排序环节的打分结果，对上述结果再次进行排序。</p>
<p>为什么需要重排？</p>
<p>在上一个环节，排序做的事本质上是预测用户对物品该兴趣的概率，考虑的只是物品与用户之间的关系，但是忽略掉了物品之间的相关性。</p>
<p>如何理解呢？分享一个极端的case，小红最近酷爱刷电影剪辑类小视频，模型学习的话，很可能学出来最后给用户推荐的都是同一个publisher的10条item。</p>
<p>这样肯定是不行的，试想，如果你正在刷抖音，连续10条都给你推荐同一个博主的内容，这个体验能好吗？所以需要rerank。</p>
<p>重排环节一般会做什么？</p>
<p>重排阶段是个策略出没之地，就是集中了各种业务和技术策略。比如为了更好的推荐体验，这里会加入去除重复、结果打散增加推荐结果的多样性、强插某种类型的推荐结果等等不同类型的策略。</p>
<p><strong>2）离线</strong></p>
<p>什么是离线数据流呢？模型训练以及模型的更新都是离线数据流完成的事。</p>
<p>离线模型的训练以及模型的更新，涉及到多个数据模块的配合，包括用户画像、物料画像、行为日志，离线数据流，我们下章节见～</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/05/23/推荐策略产品必备技能之推荐系统框架（上）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/23/推荐策略产品必备技能之推荐系统框架（上）/" class="post-title-link" itemprop="url">推荐策略产品必备技能之推荐系统框架（上）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-23 00:00:00" itemprop="dateCreated datePublished" datetime="2021-05-23T00:00:00+08:00">2021-05-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-06 00:17:20" itemprop="dateModified" datetime="2021-07-06T00:17:20+08:00">2021-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/推荐策略产品必备技能/" itemprop="url" rel="index"><span itemprop="name">推荐策略产品必备技能</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本模块的目标：</p>
<ol>
<li>梳理推荐系统框架</li>
<li>梳理推荐系统框架中的各个模块的实现</li>
<li>理解推荐系统的数据流</li>
</ol>
<p>一个推荐系统，大致分为4层，分别是离线层、存储层、近线层和在线层。<br>离线、近线和在线的区分在于响应用户行为的速度差异。</p>
<p>一个经典的Web推荐系统的架构，主要包括如下四部分：</p>
<ol>
<li>推荐服务：该服务从Web服务器获取推荐请求，然后返回推荐结果。</li>
<li>存储系统：这些系统存储用户特征、物品特征和模型参数，为了方便检索，也存储了物品索引。</li>
<li>离线学习：<ol>
<li>该组建从用户行为数据中学习模型参数，然后按照一定的周期将参数推送到在线存储系统中。</li>
<li>物品特征学习</li>
<li>用户特征学习</li>
</ol>
</li>
<li>在线学习：</li>
</ol>
<p><strong>推荐服务模块</strong>的功能是对来自业务的request进行预测。比如，我这会打开抖音，抖音后台会发送一个request给服务器，服务器接收到这个request之后，会根据过去我在抖音上的行为偏好，为我推荐向我可能感兴趣的短视频。</p>
<p><strong>存储系统</strong>的功能是存储用户特征、物品特征、以及物品索引。</p>
<p><strong>离线学习</strong>的功能包括：模型训练、物品特征、用户特征计算。</p>
<ul>
<li>模型训练是指给定用户和物品，以及用户对该物品的响应数据，来训练模型参数，这个过程一般需要耗费好几个小时的时间。</li>
<li>物品特征是比如对于非结构化数据，经常需要对这些数据进行TF_IDF计算，这个也是在离线层进行。</li>
<li>用户特征也是。</li>
</ul>
<p><strong>在线学习</strong> 的功能是利用用户的即时数据进行预估。<br>来看一个经典的推荐系统架构的设计</p>
<p><img src="https://kerryli1007.github.io/images/推荐策略产品必备技能之推荐系统框架（上）/1.jpg" alt></p>
<p>这是Netflix的推荐系统架构，这个架构的设计目标是：<br>1）支持好的用户体验，且能支持快速的迭代；<br>2）针对用户的行为，作出快速的响应。</p>
<p>在这个设计中，计算被分为了离线、近线和在线。</p>
<p>计算可以离线进行、近线进行、也可以在线进行。对于用户产生的最新行为，在线计算能更好地进行反馈，但是在线必须实时进行反馈。这样的话，就对算法的计算复杂性有很大的限制，同时，也会限制能处理的数据量。</p>
<p>离线训练能处理较大的数据量，且不要求必须是实时的。模型的更新一般是离线进行的，在模型的前后两次更新这个时间窗口中，由于没有进入新的数据，所以这个模型一直使用的是旧的数据。对于推荐系统架构最关键的因素是如何将在线和离线计算无缝结合。</p>
<p>近线计算是在上述两者之间，在近线计算，我们可以执行类似在线的计算，但不要求实时响应。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/05/22/我理解的推荐策略产品的必备技能/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/22/我理解的推荐策略产品的必备技能/" class="post-title-link" itemprop="url">我理解的推荐策略产品之必备技能</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-22 00:00:00" itemprop="dateCreated datePublished" datetime="2021-05-22T00:00:00+08:00">2021-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-04 23:51:27" itemprop="dateModified" datetime="2021-07-04T23:51:27+08:00">2021-07-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/推荐策略产品/" itemprop="url" rel="index"><span itemprop="name">推荐策略产品</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>梳理我对推荐策略产品的理解。</p>
<p>一个60分的推荐策略产品经理，我认为，至少需要具备如下能力模型：</p>
<ol>
<li>推荐系统框架</li>
<li>推荐算法原理</li>
<li>业务产品设计</li>
<li>数据分析能力</li>
<li>项目管理能力</li>
</ol>
<p>对推荐系统框架的理解，至少需要掌握：a 推荐系统架构； b 整个推荐系统的数据流。<br>对推荐算法原理的理解，至少需要：a 了解CTR常见算法，以及其演化历史；b 对各种算法策略的适用场景，优缺点有自己的思考<br>业务产品设计，这一层比较抽象，我的理解是说，产品需要了解自己产品上用户的特性，根据用户的特性，设置对应的推荐场景，并根据数据表现，调整该场景的策略，这就是能力模型4的数据分析能力。<br>最后一个能力是项目管理能力，项目管理能力是很多产品经理都忽略了的能力。在项目管理这一层能力上，我主要想强调的是：a 资源协调能力；b 风险管理能力</p>
<p>对每个能力的阐述，我都会按照从理论到实践的套路来阐述。废话不多说，让我们开始吧～Enjoy。想写推荐策略产品经理的话题</p>
<p>PS：有一段时间了，一直都没有好的思路，最近深入经营我的抖音账号，粉丝超过了1000，开通了创作者服务平台，在数据中心，有一个账号诊断模块，从5个纬度分析了我的账号，分别是播放量、完播率、粉丝净增、投稿活跃度，和互动指数，如下图。这也是我将策略产品经理的必备技能拆分为上述5个维度的灵感来源。</p>
<p><img src="https://kerryli1007.github.io/images/我理解的推荐策略产品的必备技能/1.jpg" alt></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/05/09/2021_Q2_Week5_工作总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/09/2021_Q2_Week5_工作总结/" class="post-title-link" itemprop="url">2021_Q2_Week5_工作总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-05-09 00:00:00 / 修改时间：15:51:09" itemprop="dateCreated datePublished" datetime="2021-05-09T00:00:00+08:00">2021-05-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index"><span itemprop="name">工作</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本周工作关键词：工作效率、团队赋能</p>
<p>在上周的工作总结，我有强调到，对于未来我每周写的工作总结，会对模版有调整。具体来说，是都要包括如下2部分：</p>
<ol>
<li>方法论</li>
<li>干货篇<br>同样在方法论和干货篇中，会特别突出强调WHY。</li>
</ol>
<h1 id="一-方法论"><a href="#一-方法论" class="headerlink" title="一 方法论"></a>一 方法论</h1><h2 id="1-1-提升工作效率"><a href="#1-1-提升工作效率" class="headerlink" title="1.1 提升工作效率"></a>1.1 提升工作效率</h2><p>为什么要提升工作效率？</p>
<p>答案是不言而喻的。</p>
<p>如何才能提升工作效率呢？从自己的工作中，我总结了一些经验。这些经验，可以<br>1）目标量化<br>2）规划具体到天粒度<br>3）提前将任务的操作步骤制定</p>
<p>因为上述经验的应用case，涉及到工作细节，就不在周报中详细描述。</p>
<h2 id="1-2-为团队赋能"><a href="#1-2-为团队赋能" class="headerlink" title="1.2 为团队赋能"></a>1.2 为团队赋能</h2><p>研发leader最近和我沟通了一下我的工作。</p>
<p><img src="https://kerryli1007.github.io/images/2021_Q2_Week5_工作总结/1.png" alt></p>
<p>总结一下就是<br>1）不能事事都我自己干，最后我很牛逼了，但是别人没有成长<br>2）当我事事都自己干，这样项目和产品的blocker就在于我</p>
<p>具体怎么做呢<br><img src="https://kerryli1007.github.io/images/2021_Q2_Week5_工作总结/2.png" alt></p>
<p>可预期的结果是什么呢？</p>
<p><img src="https://kerryli1007.github.io/images/2021_Q2_Week5_工作总结/3.png" alt></p>
<h1 id="二-干货篇"><a href="#二-干货篇" class="headerlink" title="二 干货篇"></a>二 干货篇</h1><h2 id="1-1-报错code与问题定位"><a href="#1-1-报错code与问题定位" class="headerlink" title="1.1 报错code与问题定位"></a>1.1 报错code与问题定位</h2><p>HTTP Status Code是用以表示网页服务器超文本传输协议响应状态的3位数字代码。</p>
<p>更多细节参考 <a href="https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81" target="_blank" rel="noopener">HTTP状态码 - 维基百科，自由的百科全书</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/05/09/工作就是去解决问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/09/工作就是去解决问题/" class="post-title-link" itemprop="url">价值就是去解决问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-05-09 00:00:00 / 修改时间：15:49:12" itemprop="dateCreated datePublished" datetime="2021-05-09T00:00:00+08:00">2021-05-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index"><span itemprop="name">工作</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一、为什么想到写这个话题"><a href="#一、为什么想到写这个话题" class="headerlink" title="一、为什么想到写这个话题"></a>一、为什么想到写这个话题</h1><p>最近看玉伯的文章《价值就是去解决问题》，摘录了其中和我价值观高度一致的两段话。</p>
<blockquote>
<p><strong>一个岗位的价值，就看能帮助公司解决多少问题</strong>。蚂蚁的产品体验，特别是商家侧的用户体验，很痛，设计师是否能推动各方去解决这些痛点？很难，但本就没有容易的事。一年推动不起来，就推动两年，两年不行就再花五年去推动，不断找人去聊，去一点一点解决，<strong>帮助公司解决的问题越大，价值就越大</strong>。价值做出来，加薪晋升等等就是自然而然的事。不用去抱怨什么，去比较什么，多想想怎么解决更多问题，去为公司为客户产生更大价值。</p>
</blockquote>
<blockquote>
<p><strong>解决问题能获得巨大的满足感和成就感</strong>，比其他事情有意思多了。这种满足感，会让人着迷，会活着活着发现解决问题就是人生的意义所在。获得满足感不一定能获得幸福感，幸福感是一个更高级的词汇，<strong>成就感是由己及他的满足，幸福感是由他及己的福报</strong>。去帮助到的人越多，流动的情感就会越多。</p>
</blockquote>
<p>因为觉得这两段话非常符合我的价值观，所以也想展开并结合我自己的工作聊一聊。</p>
<h1 id="二、“挺好的呀，你就是来帮他解决问题的，这就是你的价值。”"><a href="#二、“挺好的呀，你就是来帮他解决问题的，这就是你的价值。”" class="headerlink" title="二、“挺好的呀，你就是来帮他解决问题的，这就是你的价值。”"></a>二、“挺好的呀，你就是来帮他解决问题的，这就是你的价值。”</h1><p>我于4月1日加入了公司另一个部门。</p>
<p>4月中旬，我在电梯口遇到了公司交付负责人。她笑着和我说：“我看你在新部门表现挺好的，在某某项目上，很不错”。我笑着摇摇头说：“不算好，这个项目还是有很多问题。”她接着说：“你的价值就是来帮某某（部门老大）解决问题的呀。等你能把所有项目上的问题都解决了，不事事都去麻烦某某（部门老大），你就成长了，你也能创造更大的价值。“</p>
<p>是。我的价值完全取决于我能解决多大的问题。</p>
<p>恍惚间，觉得这一两年的成长太大了。以前总是害怕遇到问题，问题还没有发生，我自己都把自己吓死了。现在面对问题，已经完全没了恐惧。</p>
<p>我有一名好友，推荐领域的算法工程师，前不久被B站以高薪挖走，需要离开北京去上海。在他临走前，一起吃了顿饭。</p>
<p>饭桌上，我问他，你对什么负责？<br>他说，业务指标啊，比如人均浏览时长啥的。<br>我手，你觉得有什么样的能力，让你能对这些指标负责。（其实我本来想问一些干货<br>他的回答说，要是不能对这些负责，我要不直接和老板说我不干了。（哈哈哈</p>
<p>言归正传。有问题，才有机会。能解决多大的问题，就能创造多大的价值。</p>
<h1 id="三、如何才能解决问题"><a href="#三、如何才能解决问题" class="headerlink" title="三、如何才能解决问题"></a>三、如何才能解决问题</h1><p>这是一个很大的话题，我只能凭借自己的经验，尝试寻找其中的规律，做一些总结。</p>
<h2 id="心态"><a href="#心态" class="headerlink" title="心态"></a>心态</h2><p>我觉得能做到解决问题的第一步，一定是心态上的调整。从害怕遇到问题，到遇到问题，沉稳淡定。</p>
<p>周五晚上，坐在研发leader旁边（最近我都把工位搬去了研发身边，哈哈哈），他问我，我看你朋友圈发了最近都很开心，你为啥都那么开心？我想了想说，每天解决问题，也是快乐的来源呀。他说，那不错，你的底层操作系统很好。</p>
<p>其实就是心态，每天工作中有很多问题，遇到问题的时候，我是将其视为，解决了这个问题，我职场技能又提升了，还是将其视为我不顺职场路的来源，这两种心态，有本质的区别。我觉得这是最关键的影响。</p>
<h2 id="硬技能"><a href="#硬技能" class="headerlink" title="硬技能"></a>硬技能</h2><p>在这里的硬技能，我着重想分享的是，思路。</p>
<p>解决问题的过程中，会发现，问题和问题之间，相互关联。所以，在解决问题的过程中，需要<br>1）明确我要解决的问题是什么，或者说我的假设是什么<br>2）和这个问题相关的，我收集到的信息有哪些<br>3）为了验证我的假设，我需要做什么，每一步的假设是什么，每一步的产出是什么？</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/05/05/2021_Q2_Week4_工作总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/05/2021_Q2_Week4_工作总结/" class="post-title-link" itemprop="url">2021_Q2_Week4_工作总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-05-05 00:00:00 / 修改时间：14:52:38" itemprop="dateCreated datePublished" datetime="2021-05-05T00:00:00+08:00">2021-05-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index"><span itemprop="name">工作</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>很久没有写工作总结了，得拾起来。</p>
<p>本周关键词：数据流、解决问题、埋点</p>
<h1 id="一、数据流"><a href="#一、数据流" class="headerlink" title="一、数据流"></a>一、数据流</h1><p>年初时候，和商汤的一位PM沟通。彼时的我，还在负责云OCR的GTM。</p>
<p>当时我们的沟通内容如下。</p>
<p>商汤PM：你知道你负责的OCR返回的结果是什么吗？</p>
<p>我：我知道，是对文本的所见即所得的识别内容。</p>
<p>商汤PM：他们是什么样的形式存在？这个你了解吗？</p>
<p>我：你指的形式具体是指的什么？</p>
<p>商汤PM：你的ocr识别结果是什么？</p>
<p>我：是一个json文件。</p>
<p>商汤PM：这个json文件中，包含哪些部分。客户请求的时候，这个json中有哪些部分，你返回给客户的json中有哪些部分。</p>
<p>我瞬间明白，商汤PM在这里问我的是，我的云ocr服务是如何与客户产生交互。</p>
<p>在回答上述问题之前，我想recap两个知识点，分别是软件集成和HTTP。</p>
<h2 id="1-1-软件集成"><a href="#1-1-软件集成" class="headerlink" title="1.1 软件集成"></a>1.1 软件集成</h2><p>去年冬天，和NLP Leader沟通我们为客户提供服务时候，他和我讲到，当客户想将我们的AI能力，集成到他们的系统，有两种方式：一是直接将我们的代码写进他们的系统，二是调用我们的API。前者成本高昂，所以在实际业务中，我们接触更多的是后者。那么后者就需要，双方对彼此接口的内容，做一致的约定。</p>
<p>这里涉及到一个知识点，叫做软件架构。划重点，软件架构。</p>
<p>应用程序架构的关注点是应用程序，通常包括将应用程序解构为类和组件，确保设计模式的正确应用。本质上应用程序架构谈论的是软件设计的低级别切面。</p>
<p>系统架构是更大规模的应用程序架构。大多数软件系统实际上是由横跨不同层次和技术的多个应用程序组成。举个例子，你可能有这样一个软件系统，Java EE中间层消费Oracle数据库提供的数据，同时向.NET Silverlight客户端提供Web服务。每个部分都有自己的应用程序架构。</p>
<p>要让整个软件系统工作起来，就要思考如何组合这些单独的应用程序。换句话说，要有端到端的软件系统在较高层次上的整体结构。大多数软件系统都不是孤立的，因此系统架构还关注互操作系统和与环境中其他系统的集成。</p>
<p>《程序员必读之软件架构》</p>
<h2 id="1-2-HTTP"><a href="#1-2-HTTP" class="headerlink" title="1.2 HTTP"></a>1.2 HTTP</h2><p>接口调用。接口调用在我工作中，太常见了。常见到我都以为，我完全了解接口调用是怎么一回事，其实并没有。对于接口调用，我是说不出来123的。讲一个题外话，如何在简单的工作交流中，让别人知道，你有没有点东西。我的理解就是，在和别人沟通一个问题的时候，要讲出一个123。上周就接口调用的问题和我司一位非常厉害的架构师沟通。在我阐述了我的困惑之后，他逻辑非常清晰地讲出了，要解决这个问题，我要做的步骤123，以及每个步骤的背后逻辑。（</p>
<p>言归正传，回到接口调用。首先，理解一下接口调用是一件什么事？API是一件属于网络基础的事。</p>
<p>Web浏览器、服务器和相关的Web应用都是通过HTTP相互通信。HTTP是现代全球因特网中使用的公共语言。</p>
<h3 id="1-2-1-HTTP-——因特网的多媒体信使"><a href="#1-2-1-HTTP-——因特网的多媒体信使" class="headerlink" title="1.2.1 HTTP ——因特网的多媒体信使"></a>1.2.1 HTTP ——因特网的多媒体信使</h3><h3 id="1-2-2-Web客户端和服务器"><a href="#1-2-2-Web客户端和服务器" class="headerlink" title="1.2.2 Web客户端和服务器"></a>1.2.2 Web客户端和服务器</h3><p>Web内容都是存储在Web服务器上的。Web服务器所使用的是HTTP协议，因此经常会被称为HTTP服务器。</p>
<h3 id="1-2-3-资源"><a href="#1-2-3-资源" class="headerlink" title="1.2.3 资源"></a>1.2.3 资源</h3><p>一个HTTP事务由一条请求命令和一个响应结果组成。这种通信是通过名为HTTP报文（HTTP message）的格式化数据块进行。</p>
<p>HTTP支持不同的请求命令，这些命令被称为HTTP方法（HTTP method）</p>
<p>每个HTTP响应报文返回时都会携带一个状态码。状态码是一个三位数的代码，告知客户端请求是否成功。</p>
<p>那HTTP的设计思路是什么样的呢？</p>
<p>在报文编码方式上，HTTP采用了面向程序员的文本（ASCII）编码方式而非面向计算机的二进制编码方式。</p>
<blockquote>
<p>HTTP是无状态的请求-应答协议。无状态的设计是个严重缺乏前瞻性的设计，但考虑到在HTTP诞生之初网上没有什么资源，也根本不存在可以跟用户交互的网站，因此这个设计思路也是完全可以理解的。最初的HTTP（0.9版）只提供了GET方法，这是因为其作者认为网上所有的资源（网页）都是静态的，远程用户是不能修改的，浏览器所能做的就是从远程服务器上“获取（GET）”指定网页并以只读方式展示给用户，在用户获取网页之后就立即中断与服务器的连接，从而节省宽带与服务器的宝贵资源。</p>
<p>随着Internet的加速发展，特别是图片和音视频等多媒体内容的出现和流行，原先只面向文本资源对象的HTTP已不能满足人们的需求，所以HTTP做了一个较大的升级（1.0版）：首先，增加了POST方法，使得客户端可以i提交（上传）文件到服务器端；其次，通过引入Content-Type这个Header，支持除文本外的多媒体数据的传输支持。</p>
</blockquote>
<p>《架构解密：从分布式到微服务》</p>
<h2 id="1-3-回答商汤PM的问题"><a href="#1-3-回答商汤PM的问题" class="headerlink" title="1.3 回答商汤PM的问题"></a>1.3 回答商汤PM的问题</h2><p>梳理了软件集成和HTTP之后，我来尝试回答商汤PM的问题</p>
<h3 id="1-3-1-客户请求"><a href="#1-3-1-客户请求" class="headerlink" title="1.3.1 客户请求"></a>1.3.1 客户请求</h3><p>客户请求类型：Post。</p>
<p>请求代码，涉及隐私内容已删除！</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">from</span> requests <span class="keyword">import</span> post</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">flask_server = <span class="string">'https://ocr.xilanhua.com'</span></span><br><span class="line">predict_url = os.path.join(flask_server, <span class="string">'/ocr/predict/ticket'</span>)</span><br><span class="line">headers =\</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"Authorization"</span>: <span class="string">"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJiNWszTjBTanpaWTMtSVNOMk5jYlpwWXU3UERVS3FWWU82T2l4OWlkdUxBIn0.eyJleHAiOjE2MTc5Mzc5MzMsImlhdCI6MTYxNTM0NTkzMywianRpIjoiMGRlYmM5MWMtODNhNi00NjU5LWE4M2YtMDI3MWZhNGFjMWYzIiwiaXNzIjoiaHR0cHM6Ly9zc28uY2xvdWQuNHBhcmFkaWdtLmNvbS9hdXRoL3JlYWxtcy9BdXRvT0NSIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEwM2NlMzMwLTk2N2UtNDE3Mi04YzE1LTYzNzYzMGRjZWQ3NyIsInR5cCI6IkJlYXJlciIsImF6cCI6Im9jcmNsaWVudCIsInNlc3Npb25fc3RhdGUiOiI0NmM5ZDA3Yi04MGVjLTQ0MzQtYTQ5My0yNTQ4MzM4NGM3ZjYiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50IQ"</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">general_predict</span><span class="params">(image_path, scene, edge_size=<span class="number">0</span>, do_recognition=<span class="string">'True'</span>, row_range_flag=<span class="string">'False'</span>, vis_flag=<span class="string">'False'</span>)</span>:</span></span><br><span class="line">    <span class="keyword">with</span> open(image_path, <span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        cnt = f.read()</span><br><span class="line">        x = base64.b64encode(cnt)</span><br><span class="line">        image_jpeg_base64 = x.decode(<span class="string">'ascii'</span>).replace(<span class="string">'\n'</span>, <span class="string">''</span>)</span><br><span class="line">    data = &#123;&#125;</span><br><span class="line">    data[<span class="string">'image'</span>] = image_jpeg_base64</span><br><span class="line">    data[<span class="string">'scene'</span>] = scene</span><br><span class="line">    data[<span class="string">'edge_size'</span>] = edge_size</span><br><span class="line">    data[<span class="string">'do_recognition'</span>] = do_recognition</span><br><span class="line">    data[<span class="string">'row_range_flag'</span>] = row_range_flag</span><br><span class="line">    data[<span class="string">'vis_flag'</span>] = vis_flag</span><br><span class="line">    res = post(predict_url, data=data, headers = headers).json()</span><br><span class="line">    print(res)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">general_predict(<span class="string">'./test.jpg'</span>, <span class="string">'idcard'</span>,edge_size=<span class="number">0</span>, do_recognition=<span class="string">'True'</span>, row_range_flag=<span class="string">'False'</span>, vis_flag=<span class="string">'False'</span>)</span><br></pre></td></tr></table></figure>
<p>客户请求的地址，是一个flask server。</p>
<p>客户在请求时候，会传过来一段header，这个header就相当于开门的钥匙，有了这个密钥，服务才会正常响应。</p>
<p>最后，客户是将图片内容进行了base64编码，然后post给服务器。</p>
<h3 id="1-3-2-服务返回"><a href="#1-3-2-服务返回" class="headerlink" title="1.3.2 服务返回"></a>1.3.2 服务返回</h3><p>最近服务器迁移中。后续补上。</p>
<p>上面讲了很多东西，但是都只是搬砖引入，讲API的目的也是为了引出数据流，没错这才是主菜。上述主要是想讲述，数据流。</p>
<p>为什么在这里要讲数据流。从业务上来说，我是搞SaaS的，基本上为客户提供服务，都是基于API为客户提供服务，那么客户如何请求我们的服务，他们都传给了我们什么数据，这些数据传到我们服务器端上之后，有哪些阶段。相信我，对数据流的了解，是开展业务的首要前提。</p>
<p>因为在实际开展业务中，会遇到很多问题，比如响应时长、比如数据落盘问题。</p>
<p>举个例子，比如响应时长过长，需要优化？怎么优化呢？第一步，我们需要将整个客户端-服务器端的链路梳理出来，这个链路有多长，经过哪些环节，每个环节，业务逻辑是什么，处理时长是多长？</p>
<p>在举个例子，数据落盘，这个数据从进来，到罗盘都流过了哪些环节，每个环节都在做什么？为什么有这些环节？</p>
<h1 id="二、解决问题"><a href="#二、解决问题" class="headerlink" title="二、解决问题"></a>二、解决问题</h1><p>上面讲了数据流，工作中遇到的问题蛮多的，如果要对这些问题进行一下分类：</p>
<ol>
<li>数据</li>
<li>业务</li>
</ol>
<p>目前的我，应该是会将其分为数据和业务。</p>
<p>数据是算法的基石，而对业务上下游的梳理，则是开展算法策略的前提，数据和业务理解，两者缺一不可。但是在实际开展工作中，我们经常会遇到这样或者那样的问题。不管遇到什么问题，我们在解决问题时候，都应该按照以下思维模型来进行（这是我总结的一个解决问题的<strong>思维模型</strong>）</p>
<p>1）要解决的问题是什么/目标是什么？</p>
<p>2）当前收集到的信息有哪些？这些信息之间的关系是什么？</p>
<ul>
<li>业务上下游？</li>
<li>数据上下游？</li>
</ul>
<p>3）根据当前的目标和信息，接下来要实现目标，我的action是什么？这些action分别需要谁的支持，在什么时间点，主要产出分别是什么？</p>
<h1 id="三、埋点"><a href="#三、埋点" class="headerlink" title="三、埋点"></a>三、埋点</h1><h2 id="3-1-埋点是啥"><a href="#3-1-埋点是啥" class="headerlink" title="3.1 埋点是啥"></a>3.1 埋点是啥</h2><p>有一个问题哈？埋点就是数据采集吗？</p>
<p>其实数据采集标准动作有三步：埋点、采集、上报。也就是说一组数据从产生到接入存储必经三个步骤</p>
<h3 id="埋点"><a href="#埋点" class="headerlink" title="埋点"></a>埋点</h3><p>埋点只是数据采集的一个动作。</p>
<h3 id="采集"><a href="#采集" class="headerlink" title="采集"></a>采集</h3><p>一旦埋点被用户触发，数据就会产生，采集动作将捕获这些数据，做初步的格式化、组装、暂存、为上报动作做准备。</p>
<p>格式化和组装是为接下来的上报动作提供便利；暂存是为了配合上报动作的节奏。</p>
<h3 id="上报"><a href="#上报" class="headerlink" title="上报"></a>上报</h3><p>经过采集的数据从用户产品被送到数据接入层的动作过程就是上报。只有完成了上报，一个数据才算进入了数据产品体系。</p>
<p>数据到达接入层后会经历解包和解析、格式转换、数据清洗、数据存储四大技术流程。</p>
<ul>
<li>数据解包和解析</li>
</ul>
<p>根据数据协议的约定，采集层在上报数据前将魅族数据以特定的格式拼装，经过压缩上传到接入层，这样可以提高数据传输的效率。数据上传至接入层后便要进行响应的反向操作，即解包（对应压缩）和解析（对应拼装）</p>
<ul>
<li>格式转换</li>
</ul>
<p>由于解析后的数据类型与数据Topic定义的逻辑类型存在差异，这就需要根据数据Topic的定义，将每个分量转换类型和格式。</p>
<ul>
<li><p>数据清洗</p>
</li>
<li><p>数据存储</p>
</li>
</ul>
<p>数据仓库是实现数据存储的重要技术手段。</p>
<p>《 产品经理数据修炼30问》</p>
<h2 id="3-2-为什么需要埋点？埋点的重要性是什么？"><a href="#3-2-为什么需要埋点？埋点的重要性是什么？" class="headerlink" title="3.2 为什么需要埋点？埋点的重要性是什么？"></a>3.2 为什么需要埋点？埋点的重要性是什么？</h2><p>埋点上报作为数据统计分析的基础，一定要100%准确。</p>
<blockquote>
<p>用户行为分析平台就是对用户在App或网站浏览、点击等这些行为进行大数据统计分析，发现用户使用产品的行为规律、对产品功能的使用喜好程度，把这些结果应用于产品的营销、运营中。</p>
<p>用户行为，是指用户使用App、小程序或者web程序所产生的点击和浏览等交互行为。</p>
</blockquote>
<h2 id="3-3-业务中经常遇到的问题？"><a href="#3-3-业务中经常遇到的问题？" class="headerlink" title="3.3 业务中经常遇到的问题？"></a>3.3 业务中经常遇到的问题？</h2><p>根据我工作经验，经常遇到的问题有</p>
<p>1）埋点不考虑业务逻辑</p>
<p>2）埋点字段定义模糊</p>
<p>3）埋点数据上报不准确</p>
<p>分别举例来看看吧～（我发现网络上很多著作，都只讲抽象的概念，不讲case，非常让人讨厌</p>
<h3 id="3-3-1-埋点不考虑业务逻辑"><a href="#3-3-1-埋点不考虑业务逻辑" class="headerlink" title="3.3.1 埋点不考虑业务逻辑"></a>3.3.1 埋点不考虑业务逻辑</h3><p>业务逻辑是啥？</p>
<p>举个例子来说吧，比如在推荐领域，相关推荐。在做data check时候，发现每次都上报两条曝光数据。但是业务是什么样子的呢？</p>
<p><img src="https://kerryli1007.github.io/images/2021_Q2_Week4_工作总结/1.jpg" alt></p>
<p>真实的业务是这样的，就是每当用户下拉当前阅读文章到下面时候，B文章的展示出来且能被用户看到的部分，不过1/7，但是也是简单粗暴直接记为了show。这样说还是很抽象，我尝试再具体详细一些。</p>
<p>1）这是推荐场景的个性化推荐模块，目标是在下面给用户推荐当前用户可能感兴趣的内容，让用户点进去，提高用户的留存</p>
<p>2）在当前这篇文章下面，给用户推荐了A和B两篇文章，当用户刷到上图位置时候，就为A和B记为show。</p>
<p>问题来了，但是这个时候，用户压根看不清B的内容到底是啥？这会带来什么影响呢？</p>
<p>直接影响就是，可能用户本来感兴趣的内容B，但是因为没有有效展示出来，用户没有进行近一步的动作，所以会导致，直接将用户反馈记为了负反馈。</p>
<h3 id="3-3-2-埋点字段定义模糊"><a href="#3-3-2-埋点字段定义模糊" class="headerlink" title="3.3.2 埋点字段定义模糊"></a>3.3.2 埋点字段定义模糊</h3><p>比如在小视频场景，当用户刷到了当前时候，这个时候，这个视频的行为会有一个show，但是如果用户产生了观看行为，那么也就是说，用户在这个视频上消费了时间，这个时候，会记录一个duration，这个duration就表示用户在这个视频上产生了观看行为。</p>
<p>但是问题来了，用户在这个视频上观看了几秒，这个行为就是duration了呢？</p>
<p>大于等于1秒？</p>
<p>大于等于2秒？</p>
<p>这些都是要基于业务进行思考。</p>
<h3 id="3-3-3-埋点数据上报不准确"><a href="#3-3-3-埋点数据上报不准确" class="headerlink" title="3.3.3 埋点数据上报不准确"></a>3.3.3 埋点数据上报不准确</h3><p>埋点数据上报不准确主要有哪几种表现 ：</p>
<p>1）重复上报</p>
<p>2）动作顺序混乱，比如对于资讯，肯定是先show再有其他动作，比如click，但是经常会发现，先click再show，这就是有问题了！</p>
<h2 id="3-4-如何规避上述问题"><a href="#3-4-如何规避上述问题" class="headerlink" title="3.4 如何规避上述问题"></a>3.4 如何规避上述问题</h2><p>所以如何规避上述问题呢？</p>
<p>首先，业务，业务，业务，精通业务。</p>
<p>其次，每个字段的定义需要了然于胸。</p>
<p>最后，data check，data check，data check。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/04/23/2021_Q2_Week3_工作总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/23/2021_Q2_Week3_工作总结/" class="post-title-link" itemprop="url">2021_Q2_Week3_工作总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-23 00:00:00" itemprop="dateCreated datePublished" datetime="2021-04-23T00:00:00+08:00">2021-04-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-05 15:30:27" itemprop="dateModified" datetime="2021-05-05T15:30:27+08:00">2021-05-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index"><span itemprop="name">工作</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本周关键词：客户管理、负载均衡、策略产品</p>
<p>recap一下去年和百度一位MT的沟通，沟通内容是他给了我一些我博客内容的反馈，总结一下就是：方法论偏多，干货偏少。不是说，方法论不好，而是在我当前阶段，应该了解更多的干货，比如ocr的算法原理。（因为去年的时候，我还在搞ocr。这是上述recap的大背景。今年调整了赛道，开始重新搞推荐，上述建议同样适用。所以，在我今年的每周总结，我都会有意识的增加干货部分。并且可能会采取将工作总结分为方法论和干货两个模块的形式。</p>
<p>同样，在方法论和干货篇中，也会有单独的WHY模块。做一件事是执行力，这是0，知道并且能判断为什么做一件事，是0前面的1。（今年的思维比去年成熟太多了，惊喜！）</p>
<h1 id="一-方法论篇"><a href="#一-方法论篇" class="headerlink" title="一 方法论篇"></a>一 方法论篇</h1><h2 id="1-1-客户管理"><a href="#1-1-客户管理" class="headerlink" title="1.1 客户管理"></a>1.1 客户管理</h2><p>思前想后，觉得客户管理的方法论，不适合公开发布，就省略了吧。</p>
<h1 id="二-干货篇"><a href="#二-干货篇" class="headerlink" title="二 干货篇"></a>二 干货篇</h1><h2 id="2-1-负载均衡"><a href="#2-1-负载均衡" class="headerlink" title="2.1 负载均衡"></a>2.1 负载均衡</h2><p>为啥要了解负载均衡？一寸光阴一寸金。负载均衡和我有啥关系？在工作中，我经常听到这个名词，感觉不懂，就不配继续拿工资了。</p>
<h3 id="2-1-1-负载均衡是什么"><a href="#2-1-1-负载均衡是什么" class="headerlink" title="2.1.1 负载均衡是什么"></a>2.1.1 负载均衡是什么</h3><p>负载均衡是一种电子计算机技术，用来在多个计算机（计算机集群）、网络连接、CPU、磁盘驱动或其他资源中分配负载，以达到优化资源使用、最大华吞吐率、最小化响应时间、同时避免过载的目的。</p>
<blockquote>
<p>负载均衡是高可用网络基础架构的关键组件，通常用于将工作负载分布到多个服务器来提高网站、应用、数据库或者其他服务的性能和可靠性。</p>
</blockquote>
<p>太抽象了，能不能具体一点，我不喜欢抽象的描述。</p>
<blockquote>
<p>在业务初期，我们一般会先使用单台服务器对外提供服务。随着业务流量越来越大，单台服务器无论如何优化，无论采用多好的硬件，总会有性能天花板，当单服务器的性能无法满足业务需求时，就需要把多台服务器组成集群系统提高整体的处理性能。</p>
<p>基于上述需求，我们要使用统一的流量入口来对外提供服务，本质上就是需要一个流量调度器，通过均衡的算法，将用户大量的请求流量均衡地分发到集群中不同的服务器上。这其实就是我们今天要说的<strong>负载均衡</strong>。</p>
<p>使用负载均衡可以给我们带来的几个好处：</p>
<ul>
<li>提高了系统的整体性能；</li>
<li>提高了系统的扩展性；</li>
<li>提高了系统的可用性；</li>
</ul>
</blockquote>
<h3 id="2-1-2-常见的负载均衡类型"><a href="#2-1-2-常见的负载均衡类型" class="headerlink" title="2.1.2 常见的负载均衡类型"></a>2.1.2 常见的负载均衡类型</h3><h4 id="1）DNS实现负载均衡"><a href="#1）DNS实现负载均衡" class="headerlink" title="1）DNS实现负载均衡"></a>1）DNS实现负载均衡</h4><p>一个域名通过 DNS 解析到多个 IP，每个 IP 对应不同的服务器实例，这样就完成了流量的调度，虽然没有使用常规的负载均衡器，但实现了简单的负载均衡功能。</p>
<p><img src="https://kerryli1007.github.io/images/2021_Q2_Week3_工作总结/1.png" alt></p>
<h4 id="2）硬件负载均衡"><a href="#2）硬件负载均衡" class="headerlink" title="2）硬件负载均衡"></a>2）硬件负载均衡</h4><p>这种方式，我工作中基本上没有遇到过，暂时不考虑。</p>
<h4 id="3）软件负载均衡"><a href="#3）软件负载均衡" class="headerlink" title="3）软件负载均衡"></a>3）软件负载均衡</h4><p>软件负载均衡，可以在普通的服务器上运行负载均衡软件，实现负载均衡功能。目前常见的有Ngix、HAproxy、LVS。</p>
<p>工作中最经常接触的是Ngix。</p>
<p>PS：本周总结有限，因为实际写这篇总结的时候已经是5月5日了～写每周总结，不能拖，一拖就出问题！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/04/10/item-to-item collaborative filtering/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/10/item-to-item collaborative filtering/" class="post-title-link" itemprop="url">item-to-item collaborative filtering</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-10 00:00:00" itemprop="dateCreated datePublished" datetime="2021-04-10T00:00:00+08:00">2021-04-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-05 14:56:02" itemprop="dateModified" datetime="2021-05-05T14:56:02+08:00">2021-05-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/推荐系统/" itemprop="url" rel="index"><span itemprop="name">推荐系统</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>目标：</p>
<ol>
<li>了解推荐领域的经典算法i2i，产生背景、自身特点、运作原理</li>
<li>了解不同算法之间的特点，u2i、cluster model、search based、i2i</li>
</ol>
<p>以下是论文，Enjoy～</p>
<p>对于电商场景而言，推荐算法通常面临如下挑战：</p>
<ol>
<li>大型零售商拥有海量数据，数以千万计的用户与不计其数的商品。</li>
<li>推荐应用需要推荐系统实时返回数据，同时要求这些返回结果是有效的。</li>
<li>新的用户由于只有很少的购买行为和评论行为，系统往往没有这类用户的数据。</li>
<li>老用户的数据过多。</li>
<li>用户数据处于动态变化中。用户和网站的每一次交互都产生了非常珍贵的数据，推荐系统需要立即针对这些新的信息给出重新计算后的反馈。</li>
</ol>
<p>针对上述问题，通常有3种解决思路：</p>
<ul>
<li>传统的协同过滤</li>
<li>聚类模型</li>
<li>基于搜索的方法</li>
</ul>
<p>在这篇论文中，作者将上述3种方法同Amazon提出的item-to-item算法进行了分析对比。</p>
<p>和传统的算法相比，item-to-item(i2i)的优势：</p>
<ul>
<li>该算法的线上扩展性与用户以及商品的数量无关。</li>
<li>该算法可实时计算出用户偏好，可扩展至海量数据，并且这些预测的质量非常高。</li>
</ul>
<h1 id="1-传统的推荐算法"><a href="#1-传统的推荐算法" class="headerlink" title="1. 传统的推荐算法"></a>1. 传统的推荐算法</h1><p>传统推荐算法包括用户协同过滤（user-to-user collaborative filtering），聚类模型（Cluster Models）、基于搜索的方法（Search-Based Methods）。</p>
<p>绝大多数的推荐算法，其逻辑均为，针对用户A，首先找到和用户A有着相似消费行为的用户群B；然后算法将用户群B消费过的商品计算出来，得到一个商品集C；接着，将A已经购买过的商品从商品集C中减去，得到待推荐商品集D；最后，将D中的商品推荐给用户A。这类算法的核心是找到有相似消费行为的用户。具体的算法有user-to-user collaborative filtering和cluster models。除此之外，还有核心是找到相似商品的算法。这类算法的具体代表有search-based methods和item-to-item collaborative filtering。</p>
<p>总结一下，推荐算法的基础逻辑，分为两类：类别1，找到有相似的消费者；类别2，找到有相似的商品。</p>
<h2 id="1-1-用户协同过滤（user-to-user-collaborative-filtering）"><a href="#1-1-用户协同过滤（user-to-user-collaborative-filtering）" class="headerlink" title="1.1 用户协同过滤（user-to-user collaborative filtering）"></a>1.1 用户协同过滤（user-to-user collaborative filtering）</h2><p>传统的基于用户的协同过滤算法将用户表征为关于物品的N维向量，N在这里表示的是不同物品的类别数量。这个向量的组成部分有正的，也有负的（The components of the vector are positive, for purchased or positively rated items and negative for negatively rated items.）。对于Best-selling 商品，算法将这些向量的组成部分相乘，让不那么出名的商品更相关。对于绝大多数消费者而言，这些向量都是很稀疏的。</p>
<ul>
<li>要回答什么是sparse feature，可能首先要理解什么是feature。</li>
<li>一般在machine learning意义上，我们常说的feature，是一种对数据的表达。当然，要衡量一种feature是否是合适的表达，要根据数据，应用，ML的模型，方法….很多方面来看。一般来说，Feature应该是informative（富有信息量），discriminative（有区分性）和independent（独立）的。</li>
<li>那么具体怎么选择feature，其实一直是一个开放的问题。在机器学习里面，feature的选择是至关重要的：对于同一种学习的模型，同样的学习方法，同样的数据，选择不同的feature来表达，可能会产生完全不同的效果。</li>
<li>Feature有很多种特性和分类：Feature可以是Linear（线性），也可以是Non-linear（非线性）的；Feature可以是Fixed（固顶的），也可以是Adaptive（适应性的)….甚至feature都可以不是numerical的，但因为题主问的是sparse feature，所以我就在这里特指numerical的feature。</li>
<li>如果把我们的每一个数据点，想象成一个vector（向量），记作y，对应的feature则可以用另外一个vector来表示，记作x。</li>
</ul>
<p>更多关于稀疏向量的解释，参考 <a href="https://www.zhihu.com/question/31951092" target="_blank" rel="noopener">https://www.zhihu.com/question/31951092</a></p>
<p>该算法通过一些相似的用户来生成推荐。通过计算两个消费者的相似度，通常用来计算两个消费者相似度的方式是计算这两个向量之间的cosine。</p>
<p>也有一些其他的方法来计算不同用户之间的相似度，但是这些方法各有利弊。详细参考<a href="https://www.youtube.com/watch?v=VZKMyTaLI00" target="_blank" rel="noopener">https://www.youtube.com/watch?v=VZKMyTaLI00</a></p>
<p>使用协同过滤算法来做推荐是非常消耗计算资源的。最差的情况下，是O(MN)，M是用户的数量，N是商品的数量，因为这类算法需要遍历每个消费者来评估N个商品。然而，由于通常用户的向量都是非常稀疏的，这个算法的表现更倾向于是O（M+N）。扫描所有的消费者大概是O（M）。但是这里有一些消费者，他们买了或者购买了大量的商品，就需要O（N）的处理时间。因此，最后这个算法的性能是O（M+N）。对于大的数据集，比如有大于100万的用户，和大于10万的商品，该算法会遇到非常大的性能和可扩展性的问题。</p>
<p>通过减少数据量可以部分地解决这个可扩展性的问题。我们可以减少M通过随机取样或者删除只有少量购买行为的的消费者。我们可以减少N通过移除不受欢迎或者非常受欢迎的商品。</p>
<p>但是不幸的是，这些方法都或多或少会降低推荐的质量。首先，如果算法只筛选了一小部分消费者，这一小部分消费者的相似度会降低。其次，最后，如果算法将不那么受欢迎或者受欢呼的商品移除了，那么这些商品永远不会在推荐系统中出现，消费者也不会收到这些推荐。</p>
<h2 id="1-2-聚类模型（Cluster-Models）"><a href="#1-2-聚类模型（Cluster-Models）" class="headerlink" title="1.2 聚类模型（Cluster Models）"></a>1.2 聚类模型（Cluster Models）</h2><p>通过一个case，来看聚类模型的整个pipeline。</p>
<p>西蓝花来到网页上，这个网页要做的是找到和西蓝花画像最相似的用户群。算法首先将所有用户分为N个Group，接着将西蓝花放进其中的一个Group，比如说Group A，最后算法通过Group A中消费者的购买行为和评分来为西蓝花推荐商品。</p>
<p>这些Group通常是通过聚类或者无监督学习来获得，虽然在有的应用是手动来划分。基于相似度指标，聚类算法将最相似的用户放在同一个群组。因为在大数据集上聚类的表现不好，所以大多数应用使用贪心聚类算法。这些算法通过先开始一个小的部分，这个小部分只包含几个随机选择的用户。接着这个算法重复地向该群组添加用户。对于大的数据集，以及有高维度的数据集，抽样以及降维是必须的。</p>
<p>一旦算法创建了群组，他会计算用户和各个群组之间的相似度，接着选择相似度最高的群组，并将该用户划分进该群组。</p>
<p>因为聚类算法在计算相似度时候，计算的是特定用户与N个群组之间的相似度，而非与所有用户之间的相似度，因此聚类算法的线上可扩展性是更好的，且性能更佳。但是，聚类算法的质量是很差的。</p>
<h2 id="1-3-基于搜索的方法（Search-Based-Methods）"><a href="#1-3-基于搜索的方法（Search-Based-Methods）" class="headerlink" title="1.3 基于搜索的方法（Search-Based Methods）"></a>1.3 基于搜索的方法（Search-Based Methods）</h2><p>搜索或者基于内容的方法将推荐作为对于相关物品的搜索。考虑到用户的购买和对商品的评分，整个算法会建构一个query，去寻找同一个作者、艺术家、导演的受欢迎的物品。如果用户西蓝花购买了教父的DVD合集，这个系统会推荐其他的犯罪剧，或者其他Marlon Brando主演的电影，或者其他Francis Ford Coppola导演的电影。</p>
<p>对于用户只有很少的购买或者评分行为，基于搜索的方法也能扩展，并且表现良好。相反，对于有着成千上问购买行为的用户，基于所有物品的query构建反而是不切实际的。这样的情况下，算法必须使用的是数据的子集，这样就会降低数据质量。在所有case中，基于搜索的方法表现是糟糕的。推荐结果太普遍，或者太窄了。（比如推荐的都是热门、或者推荐的都是一个作者的所有书籍）推荐系统应该帮助消费者发现新的商品、相关的商品、或者消费者感兴趣的商品。但是同一个作者受欢迎的商品或者同一个类别的商品，是不能达成推荐系统的目标的。</p>
<h1 id="2-item-to-item的协同过滤"><a href="#2-item-to-item的协同过滤" class="headerlink" title="2. item-to-item的协同过滤"></a>2. item-to-item的协同过滤</h1><p>在邮件营销和网站首页，亚马逊均使用推荐系统作为营销工具。</p>
<p>但是由于现存的推荐算法无法处理亚马逊上数以亿万计的商品和用户，因此亚马逊创建了自己的推荐算法，基于物品的（i2i）协同过滤，该算法的特点可以处理大数据并且实时给出高质量的推荐。</p>
<h2 id="2-1-item-to-item的原理"><a href="#2-1-item-to-item的原理" class="headerlink" title="2.1 item-to-item的原理"></a>2.1 item-to-item的原理</h2><p>i2i将消费者购买的商品的相似度进行打分，然后将相似的商品放进一个推荐列表。</p>
<p>对于一个给定的商品，为了找到与该商品最相似的商品，算法会创建一个相似item表来找到消费者最有可能一起购买的商品。我们可以创建一个product-to-product的矩阵，通过迭代所有的商品，并计算每一对的相似度。然而，很多商品的没有共同的消费者，因此这种方式就是非常无效的并且也很占用内存。接下来的迭代算法提供一个一个更好的方式，通过计算一个商品与所有相关商品之间的相似度。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">For each item in product catalog, I1</span><br><span class="line">For each customer C who purchased I1</span><br><span class="line">For each item I2 purchased by</span><br><span class="line">customer C</span><br><span class="line">Record that a customer purchased I1</span><br><span class="line">and I2</span><br><span class="line">For each item I2</span><br><span class="line">Compute the similarity between I1 and I2</span><br></pre></td></tr></table></figure>
<p>在两个item中来计算相似度，但是一个通用的方法是使用我们之前提到的计算的cosine，在这里一个向量代表一个商品，而不是一个消费者。</p>
<p>线下对相似物品的计算非常的耗时，最差情况下。</p>
<h2 id="2-2-算法对比"><a href="#2-2-算法对比" class="headerlink" title="2.2 算法对比"></a>2.2 算法对比</h2><p>亚马逊有2900万消费者和几百万的商品。其他的零售店也有相对较大的资源，这些数据都提供机会。</p>
<p>基本上当前所有的算法都是在小数据集上进行的测评，这些数据集有MovieLens data set，包括35,000消费者和3,000物品，EachMovie data set，包括4,000消费者和1,600物品。</p>
<p>对于非常大体量的数据集，一个可扩展的推荐算法必须能够在线下完成计算。做一个简短的对比，现存的方法有如下弊端：</p>
<ul>
<li>传统的CBF没有线下计算，线上计算量随着数据量呈线性增加，针对大数据集场景，该算法是无法投产的，除非对数据集进行将维、抽样、或者切分。但是这些操作都会降低推荐的质量。</li>
<li>聚类算法在线下计算表现很好，但是线上推荐质量相对较差。为了提升，可以增加聚类后群组的数量，但是这个会让线上的分类计算量增加。</li>
<li>基于搜索的方法建构了关键词，类别以及作者索引，但是不能提供更新、更有趣的推荐。这类方法对于有大量购买和评分的行为的用户而言，可扩展性差。</li>
</ul>
<p>i2i在可扩展性和表现上都很好的原因是，该算法在线下计算商品的相似度。i2i的online部分只是针对消费者的购买和评分行为，查找相似的商品，这个过程只是依赖于消费者购买或者评分了多少商品。因此，即便是针对特别大的数据集，该计算方式也是尤为快。因为算法推荐的都是高度相关的商品，因此推荐的效果也</p>
<h1 id="3-生产场景应用"><a href="#3-生产场景应用" class="headerlink" title="3. 生产场景应用"></a>3. 生产场景应用</h1><p>待补充</p>
<p>待补充</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">一颗西蓝花🥦</p>
  <div class="site-description" itemprop="description">AI/思考/学习</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">103</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">一颗西蓝花🥦</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
