<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.8.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"kerryli1007.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="AI/思考/学习">
<meta property="og:type" content="website">
<meta property="og:title" content="一颗西蓝花🥦">
<meta property="og:url" content="http://kerryli1007.github.io/index.html">
<meta property="og:site_name" content="一颗西蓝花🥦">
<meta property="og:description" content="AI/思考/学习">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一颗西蓝花🥦">
<meta name="twitter:description" content="AI/思考/学习">

<link rel="canonical" href="http://kerryli1007.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>一颗西蓝花🥦</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">一颗西蓝花🥦</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/07/13/20210713-聊一聊新品物料相关/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/13/20210713-聊一聊新品物料相关/" class="post-title-link" itemprop="url">聊一聊新品物料相关</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-07-13 00:00:00 / 修改时间：09:07:06" itemprop="dateCreated datePublished" datetime="2021-07-13T00:00:00+08:00">2021-07-13</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index"><span itemprop="name">工作</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>新品物料，就说不开一个问题，冷启动。</p>
<p>在推荐领域，关于冷启动，一共有三个大的话题：</p>
<ul>
<li>用户冷启动</li>
<li>物料冷启动</li>
<li>系统冷启动</li>
</ul>
<p>物料冷启动的策略包括基于物料meta信息、以及ee探索性质的。</p>
<p>但之前一直没有就物料冷启动与推荐系统、还有生态（UGC、PGC）进行详细阐述。</p>
<p>界定本文要讨论的topic：</p>
<ol>
<li>冷启动的目标</li>
<li>兼顾冷启动的系统设计</li>
</ol>
<h1 id="一、目标"><a href="#一、目标" class="headerlink" title="一、目标"></a>一、目标</h1><p>物料冷启动的目标是什么？</p>
<p>对系统来说，流量价值最大化。流量价值最大化是什么意思？比如我们一共就100个upv。现在进来了一批新物料，我们需要给这些物料曝光。因此我们需要将物料推送给特定的用户。</p>
<p>最简单的解法，直接将新品物料随机分发给用户。这样的直接影响是，由于这样的随机分发，和用户兴趣无关，也同用户当前浏览的资讯内容无关，导致，用户体验差，虽然给这些物料了曝光，但是伤害了用户体验，也造成了流量的浪费。</p>
<p>更好的解法是什么？<br>1）构造物料的静态画像，基于内容，即上文说到的基于物料meta信息<br>2）基于物料本身的信息评估物料的质量，比如小红书场景，图片是否高清、文本语言是否通顺，是评估笔记质量的重要标准。<br>3）召回时候不要完全随机召回，也需要by一定语意召回。什么意思呢？就是说，比如最简单的做法，当用户西蓝花发了一篇健身类的笔记，完全随机的召回，就是将这篇文章随机推荐给500个用户，给500个pv，但是很可能这500个人都没有健身的兴趣，所以对于这篇物料来说，show 500，click 0。这样的流量分发就是效率低下的，浪费了500个pv，一来没有给物料积累正确的反馈数据数据，二来带给了用户不好的体验。所以更好的做法是在召回时候，by一定语义召回。基于内容做一定语义召回。</p>
<p>总结一下：在新物料曝光这个过程中，将物料分发给可能对该物料感兴趣的用户；对内容侧的画像丰富是按照其内容质量进行等级划分，决定给这个物料多少pv。（比如我在抖音的一些视频，自然流量，差不多是500；另一些like、comment多的，自然流量会有5w）</p>
<p>上述讲的所有，最终评估的指标包括：</p>
<ul>
<li>by 用户维度的 ctr（click/show）、人均停留时长（内容消费深度）等</li>
</ul>
<p>更好解法的好处：</p>
<ol>
<li>带给用户更好的体验</li>
<li>为物料积累准确的数据 </li>
</ol>
<p>思考，因为我经常用小红书、抖音，根据我自己也做推荐系统的经验，这两个平台是怎么做物料冷启动的？</p>
<p>基础流量：基础流量的意思就是，给定一条新物料，一定次数的曝光（PV数），这个流量的pv数，抖音给的大概在500，小红书给的大概在100.<br>什么意思呢？如果一条抖音视频数据如下，show 500，like 20，comment 1-2，基本上这个数据表现，平台不会再给流量了，即抖音不会继续将这条视频分发给更多的人了。<br>所以，基本上show 500就是判断这个视频是否需要继续被分发的关键，那么如何精准地分发这给这500个pv就非常重要。</p>
<p>如果在500pv数据的基础上，这个视频的表现非常好，like高、comment多，且comment中有很多艾特，说明这条视频质量高、传播性强，那么这个时候，平台会不断给这个视频流量。</p>
<p>多说一点，我两个月前发过一条视频，抖音给了6w show，比较神奇的是，当时这条动态没有任何关键词描述，就随便配了几个与视频内容也不符合的字，说明抖音在构造物料画像时候，是可以基于视频内容做理解的啊。</p>
<h1 id="二、系统设计"><a href="#二、系统设计" class="headerlink" title="二、系统设计"></a>二、系统设计</h1><p>如果是我，我要怎么设计？</p>
<p>从物料的视角，先了解推荐系统的数据流。</p>
<p>大家好，我是创作者西蓝花创作出来发布在小红书的笔记，系统给我的编号是A00001。</p>
<p>系统将我推荐给了100个用户，这100个用户在推荐主站看到了我，但是没有人点击过我。接着，我就再也没有出现再过推荐首页了。</p>
<p>大家好，我是创作者西蓝花创作出来的物料，系统给我的编号是A00002.<br>系统将我推荐给了100个用户，这100个用户在推荐主站看到了我，50个人点击了我，30个人收藏了我，20个人like了我。10个人comment了我。接着，我在推荐首页被推荐给了更多的人，我第一次被这么多人看到。很多人看到了我，然后关注了西蓝花，她可开心了。暗自下定决心，要创作更多的更好的内容发布在小红书平台。</p>
<p>对于小红书这个推荐系统而言，从物料质量划分维度，A00001的质量低，A00002的质量高。A00002质量高的表现有哪些？如何量化A00002的质量高？</p>
<ul>
<li>点击率高，点击率 = 50 /100 = 50%</li>
<li>收藏率高</li>
<li>like率高</li>
<li>comment高</li>
</ul>
<p>所有这些指标带给平台最直接的收益是：用户在平台的停留时长更长，因为用户在单篇物料上停留时间长。</p>
<p>我们再来看一个推荐系统不太准的系统</p>
<p>我是一个健身物料，但是系统将我推荐给了100个，不爱健身的人。他们对我也没有什么兴趣，因此我只获得了500个show。<br>我是一个制作很精美的化妆视频，系统将我推荐给了100个对化妆没有兴趣的人，他们对我也没有什么兴趣，因此我只获得了500个show。</p>
<p>这样的结果是什么，西蓝花作为创作者的创作兴致直接被打压 = = </p>
<p>话说回来，从我一开始玩短视频，本来是快手和抖音一起玩，发生1件事，让我直接放弃掉了快手。</p>
<p>2021.5.15在快手和抖音分别发了同一条内容，抖音给了6w pv，快手给了500pv。抖音涨粉了1000，但是快手涨粉0。这件事直接让作为创作者的我不再使用快手的直接原因。</p>
<p>说回来那条动态，都是一条视频，配图都是“随便拍一下”，但是抖音似乎直接将这条动态推送给了感兴趣的人，快手就弱一点，没有做好冷启动。所以，冷启动阶段的精准匹配实在是太重要了。（个人陋见，也有可能我发的内容，快手不喜欢，而不是快手的精准化匹配不好。</p>
<p>不过，新物料的精准分发确实是非常重要。</p>
<p>那么系统要如何更好地支持物料冷启动？</p>
<p>目标是什么？指标是什么？（If you can not measure it, you can’t improve it)</p>
<ul>
<li>被分发出去新物料的用户的点击率、人均浏览时长。</li>
<li>点击率（ctr），衡量的是，比如我分发了100个item，其中有多少个被点击了，但是考虑到标题党可能存在，所以不能只看ctr</li>
<li>还需要看人均物料浏览时长。</li>
<li>3、7日留存。</li>
</ul>
<p>要让ctr好、人均物料浏览时，就需要做到推荐得准。在文本领域，和朋友沟通，了解到知乎的新品召回也是by语意topic。</p>
<p>最后总结一下：</p>
<ol>
<li>通过提升新item分发精准度提高新物品分发的效率。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/07/11/20210711-聊一聊相关推荐/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/11/20210711-聊一聊相关推荐/" class="post-title-link" itemprop="url">聊一聊相关推荐</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-07-11 00:00:00" itemprop="dateCreated datePublished" datetime="2021-07-11T00:00:00+08:00">2021-07-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-26 23:27:00" itemprop="dateModified" datetime="2021-07-26T23:27:00+08:00">2021-07-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index"><span itemprop="name">工作</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>界定一下本文讨论的topic：</p>
<ol>
<li>什么是相关推荐</li>
<li>市面上产品的相关推荐</li>
<li>为什么需要相关推荐</li>
<li>从产品设计视角看相关</li>
<li>如何衡量相关推荐效果好坏</li>
<li>相关推荐的数据流</li>
<li>从物料视角看相关推荐</li>
</ol>
<blockquote>
<p>过去埋藏在地下，挖出来时是煤炭，是你今天的炉火。</p>
</blockquote>
<h1 id="一、什么是相关推荐"><a href="#一、什么是相关推荐" class="headerlink" title="一、什么是相关推荐"></a>一、什么是相关推荐</h1><p>如果两个item的相似度高，可将其理解为相关推荐。<br>具体一点：</p>
<ul>
<li>资讯场景：两篇讲离婚类的合同。</li>
<li>电商场景：intoyou的唇泥和维姿的唇泥。<br>上述场景的相似度判断标准均从item本身的特质进行判断，技术上为content based相关计算。</li>
</ul>
<p>但是如果上述item本身的特征少，那我们可使用cf的技术实现手段。</p>
<p>备注：了解content based算法以及cf算法的适用场景，以及优缺点是必备的。</p>
<h1 id="二、市面上产品的相关推荐"><a href="#二、市面上产品的相关推荐" class="headerlink" title="二、市面上产品的相关推荐"></a>二、市面上产品的相关推荐</h1><h2 id="2-1-资讯"><a href="#2-1-资讯" class="headerlink" title="2.1 资讯"></a>2.1 资讯</h2><p>调研今日头条和腾讯新闻的相关推荐模块<br><img src="https://kerryli1007.github.io/images/聊一聊相关推荐/1.jpg" alt></p>
<ul>
<li><p>相似之处</p>
<ul>
<li>ner<br>命名实体识别（Named Entity Recognition，简称 NER），又称作“专名识别”，是指识别文本中具有特定意义的实体，主要包括人名、地名、机构名、专有名词等。在推荐场景下，NER是深度查询理解（Deep Query Understanding，简称 DQU）的底层基础信号，主要应用于item召回、用户意图识别</li>
</ul>
</li>
<li><p>差异之处</p>
<ul>
<li>今日头条的相关推荐栏位包括i2i、u2i，并且会实时更新用户基于搜索框呈现出的短期兴趣（相隔1-2刷）</li>
<li>腾讯视频的相关推荐栏位暂且只覆盖i2i，且不会实时更新用户基于搜索框呈现的短期兴趣（相隔1-2刷）</li>
</ul>
</li>
</ul>
<p>总结一下：相关推荐出来的内容不一定必须是有相似度的，主要看产品如何定义，相关推荐场景也可以被叫做持续消费场景。</p>
<p>（善于总结，让读者或者听众快速get到自己表达的点，对别人友好，对自己也友好）</p>
<h2 id="2-2-视频（B站）"><a href="#2-2-视频（B站）" class="headerlink" title="2.2 视频（B站）"></a>2.2 视频（B站）</h2><p>视频内容详情页的推荐栏位<br><img src="https://kerryli1007.github.io/images/聊一聊相关推荐/2.jpg" alt><br>总结：视频推荐场景有做很明显的基于视频内容的推荐。</p>
<h1 id="三、为什么需要相关推荐"><a href="#三、为什么需要相关推荐" class="headerlink" title="三、为什么需要相关推荐"></a>三、为什么需要相关推荐</h1><p>我们思考一下，如果没有相关推荐，用户的使用操作链路。</p>
<p>资讯场景<br>用户小西进入主站，通过推荐或者搜索发现自己喜欢的文章，点击进入浏览。浏览完毕，退出。继续通过主站推荐或者搜索的方式发现自己喜欢的文章。</p>
<p>这样操作的影响：</p>
<ol>
<li>用户操作成本高，难以找到感兴趣的文章</li>
<li>体验不流程。<br>综上，都不利于用户在平台停留时间长。</li>
</ol>
<p>短视频场景：短视频场景的用户链路同上。</p>
<p>总结，相关推荐场景的用途是延长用户在平台的停留时长。所以这个场景也可以叫做持续消费场景。</p>
<h1 id="四、从产品设计视角看相关"><a href="#四、从产品设计视角看相关" class="headerlink" title="四、从产品设计视角看相关"></a>四、从产品设计视角看相关</h1><p>所有产品设计都是围绕业务目标开展，我们的业务目标是延长用户在平台的停留时长。所以我们希望在用户消费完一个物料时候，立马给对方推她可能感兴趣的第二个、第三个item。所以有了如下的设计版式：</p>
<ul>
<li><p>底部推荐栏位<br><img src="https://kerryli1007.github.io/images/聊一聊相关推荐/3.jpg" alt></p>
</li>
<li><p>侧边推荐栏位</p>
</li>
</ul>
<p><img src="https://kerryli1007.github.io/images/聊一聊相关推荐/4.jpg" alt></p>
<p>我是抖音、小红书的深度用户，最近刷视频有一个很火的概念，叫做沉浸式护肤/化妆，同理在推荐场景中，借用这个概念，这样的推荐产品形态设计，带给用户的体验式沉浸式阅读，不要被打扰。</p>
<h1 id="五、如何衡量相关推荐效果的好坏"><a href="#五、如何衡量相关推荐效果的好坏" class="headerlink" title="五、如何衡量相关推荐效果的好坏"></a>五、如何衡量相关推荐效果的好坏</h1><p>当相关推荐的效果很差时，比如用户明明在浏览健身类文章，但是给用户推荐了离婚类文章，用户还是单身狗呢。这样的场景，可以直观通过肉眼分析bad case来判断推荐效果的好坏。当然，也要关注线上指标，包括ctr、uctr（有多少占比的用户有点击行为），人均文章停留时长。</p>
<p>注意哦，在做优化的时候，千万不能只关注ctr，因为ctr高和推荐结果质量没有不是正相关，很极端的场景，都推标题党，点击率就上去了，但是用户体验其实很差。分析一下，如果用户点击了标题党文章，下一个直接动作是什么，肯定是回退出当前文章，所以用户在当前文章的浏览时间是很短的，因此可以有辅助指标，用户浏览单篇文章的时长，浏览时长也是衡量浏览深度的一个指标。</p>
<p>当效果已经很好，要做的是fine tune的时候，肉眼不太能再辨别效果是否更好，就需要进行线上分流实验，关注线上指标，包括ctr、uctr、人均文章停留时长。</p>
<h1 id="六、推荐策略的数据流"><a href="#六、推荐策略的数据流" class="headerlink" title="六、推荐策略的数据流"></a>六、推荐策略的数据流</h1><p>召回、排序、业务规则。</p>
<p>排序一般怎么做？<br>模型是一个比较抽象的词，是指对一种映射的抽象描述，即 f（context，user，item）—&gt; score。衡量一个模型的好坏，就是假设出来的这个映射关系和真实内在关系的距离。</p>
<p>但是上述方式的表达能力弱，参考下述排序模型发展史<br><img src="https://kerryli1007.github.io/images/聊一聊相关推荐/5.jpg" alt><br>总结一下：特征工程以及特征工程的自动化，一直是推动实用化推荐系统演技的主要方向。</p>
<p>这个topic，新开文章单独写。</p>
<h1 id="七、从物料视角看相关推荐"><a href="#七、从物料视角看相关推荐" class="headerlink" title="七、从物料视角看相关推荐"></a>七、从物料视角看相关推荐</h1><p>这个topic，参考我的另一篇文章，聊一聊新品物料相关。</p>
<p>参考链接：</p>
<ol>
<li><a href="https://segmentfault.com/a/1190000039404377" target="_blank" rel="noopener">https://segmentfault.com/a/1190000039404377</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/07/08/20210708-于黑暗中作光明/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/08/20210708-于黑暗中作光明/" class="post-title-link" itemprop="url">于黑暗中作光明</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-07-08 00:00:00 / 修改时间：00:30:14" itemprop="dateCreated datePublished" datetime="2021-07-08T00:00:00+08:00">2021-07-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index"><span itemprop="name">工作</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>如果你觉得四周黑暗，那么说明你自己不是一盏明灯。</p>
<h1 id="一、两则对话"><a href="#一、两则对话" class="headerlink" title="一、两则对话"></a>一、两则对话</h1><p>分享和老板的对话。</p>
<p>【第一则】</p>
<pre><code>- 老板：你的目标就是变得更牛逼。
- 我反问：怎么才能算是牛逼一些，如何才能牛逼一些？
- 老板答：你靠自己就能把项目run下来，其他人都是你的工具人。
</code></pre><p>【第二则】</p>
<pre><code>- 我：项目总是不一帆风顺。
- 老板：怕啥，总有路的。
</code></pre><p>这两则对话，非常简练。但于我，非常inspring。<br>一是让我继续保持乐观的态度，车到山前必有路；二是让我开始意识到我的目标可以非常简单，就是实现一个又一个的目标，实现目标的过程中，其他人都是我的工具人，都是我的资源。</p>
<h1 id="二、于暗夜中为作光明"><a href="#二、于暗夜中为作光明" class="headerlink" title="二、于暗夜中为作光明"></a>二、于暗夜中为作光明</h1><p>最近为团队做了一些贡献，帮助团队在当前较混沌的时刻，找到了一些确定的事，以及接下来的前进方向。</p>
<p>能为团队做这样的贡献，分外荣幸，希望能多为团队做贡献。于暗夜中为作光明。</p>
<p>备注：我自己的笔记是记录了这件事的详细过程，发布在Blog上，因此做了隐藏。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/05/30/推荐策略产品必备技能之推荐算法原理（上）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/30/推荐策略产品必备技能之推荐算法原理（上）/" class="post-title-link" itemprop="url">推荐策略产品必备技能之推荐算法原理（上）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-05-30 00:00:00 / 修改时间：19:39:15" itemprop="dateCreated datePublished" datetime="2021-05-30T00:00:00+08:00">2021-05-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/推荐策略产品必备技能/" itemprop="url" rel="index"><span itemprop="name">推荐策略产品必备技能</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>工业界的推荐算法链路，通常是召回、粗排、精排。</p>
<h1 id="一、召回"><a href="#一、召回" class="headerlink" title="一、召回"></a>一、召回</h1><p>在召回章节，我的构思书写思路为</p>
<ol>
<li>多路召回</li>
<li>每路召回的具体实现</li>
<li>召回与过滤</li>
</ol>
<p>推荐系统的召回阶段是根据用户的数据（静态数据，历史行为数据），为用户在海量的候选集中粗选一批待推荐的内容。<br>在实际应用中，召回模块一般都是多路召回的架构。这样设计主要出于如下几点的考虑</p>
<ol>
<li>考虑用户层面。</li>
<li>考虑系统层面。增强系统的鲁棒性，部分召回实效，其余召回队列正常工作，不会导致整个召回层失效。</li>
<li>考虑多样性内容分发。图文、视频、小视频，精准、试探、时效各占一定比例。召回目标的多元化。</li>
<li>可解释性，某一部分是有明确的推荐理由的。</li>
</ol>
<p>比如京东电商推荐的召回</p>
<p><img src="https://kerryli1007.github.io/images/推荐策略产品必备技能之推荐算法原理（上）/1.png" alt></p>
<p>这些召回规则对于特定的场景都是通用的，但是问题来了，有的用户是有一些反馈记录的，比如截图一个抖音主页推荐，我对一些推荐的视频是有明确的负反馈的，如果这类视频再推荐给我，是非常伤害用户体验的，所以这个阶段，会进行一个过滤。</p>
<p>过滤之后，会对召回出来的物料进行模型排序。</p>
<p>在上篇，主要讲一下召回。每一路召回的目标是不一样的。</p>
<p>比如在电商场景，常见的召回有</p>
<ul>
<li>基于内容的召回</li>
<li>协同过滤召回</li>
<li>基于模型的召回</li>
<li>DSSM召回</li>
</ul>
<h2 id="1-1-基于内容的召回"><a href="#1-1-基于内容的召回" class="headerlink" title="1.1 基于内容的召回"></a>1.1 基于内容的召回</h2><p>基于内容推荐的基本思想是为用户推荐与他感兴趣的项目内容相似的项目，即发掘用户曾经喜欢过项目的特征，并推荐类似的项目。</p>
<p>基于内容的推荐系统主要包括：项目建模、用户建模、产生推荐。</p>
<p>一般来说，物品都有一些关于内容的分类，电影有战争、科幻、爱情等。基于内容的推荐，就是根据这些物品的内容属性和用户历史评分或操作记录，计算出用户对不同内容的爱好程度，再根据这些爱好推荐其他相同属性的物品。</p>
<p>内容推荐的基本方法有如下4个步骤：<br>1）内容表征（item representation）：为每个item都抽取出一些特征来表示此item；<br>2）用户偏好计算：利用过去一个用户的显式评分或隐式操作，计算用户不同特征上的偏好分数。<br>3）内容召回：将待推荐物品的特征与用户偏好得分相匹配，取出用户最有可能喜欢的物品池<br>4）物品排序：按用户偏好召回物品池</p>
<p><strong>步骤一：内容表征</strong><br>从文章内容中抽取出一些代表他们的属性，最常用的方法就是利用出现在一篇文章中的词来代表这篇文章。item会有一些属性对它进行描述，这些属性通常分为两种：结构化与非结构化信息。</p>
<p>比如电影类别特征，例如可选的电影类别有：爱情、剧情、科幻、战争、中国、日本、韩国、美国，合计8个类别。《银河护卫队》同时具有科幻和美国2个内容特征，那么它的结构话特征可用一个8位的二进制数表示如下：</p>
<p>对于一些非结构化的内容，需要进行处理，提取出相对应的特征。</p>
<p>比如对电影，具有如下字段：电影ID（id）、标题（title）、上映时间（year）、电影类型/标签（genre，基因）、指示（indicators）、indicators数组的数量（numFields）：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> <span class="string">"id"</span>: <span class="string">"65006"</span>,</span><br><span class="line"> <span class="string">"title"</span>: <span class="string">"Impulse"</span>,</span><br><span class="line"> <span class="string">"year"</span>: <span class="string">"2008"</span>,</span><br><span class="line"> <span class="string">"genre"</span>: [<span class="string">"Mystery"</span>,<span class="string">"Thriller"</span>],</span><br><span class="line"> <span class="string">"indicators"</span>: [<span class="string">"154"</span>,<span class="string">"272"</span>,”<span class="number">154</span><span class="string">","</span><span class="number">308</span><span class="string">", "</span><span class="number">535</span><span class="string">", "</span><span class="number">583</span><span class="string">", "</span><span class="number">593</span><span class="string">", "</span><span class="number">668</span><span class="string">", "</span><span class="number">670</span><span class="string">", "</span><span class="number">680</span><span class="string">", "</span><span class="number">702</span><span class="string">", "</span><span class="number">745</span><span class="string">"],</span></span><br><span class="line"><span class="string"> "</span>numFields<span class="string">": 12</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>一般这些数据都是放在es中，便于索引。关于这些数据在es中，如何做索引的，暂时还没有进一步做研究，后续补充。</p>
<p><strong>步骤二：用户偏好计算</strong>，比如在电影场景，我们可以分析用户西蓝花在过去一周的行为。来计算user_behavior_profile。<br><strong>步骤三：内容召回</strong>，根据用户偏好召回对应内容。<br><strong>步骤四：物品排序</strong>，最后进行排序，</p>
<p>基于内容的推荐方法，优点</p>
<ol>
<li>物品没有冷启动问题，因为物品的内容特征不依赖用户数据</li>
<li>原理简单，易于定位问题.</li>
</ol>
<p>缺点：</p>
<ol>
<li>依赖于物品的meta信息，如果物品的信息较少，则无法做出推荐</li>
</ol>
<h2 id="3-2-协同过滤"><a href="#3-2-协同过滤" class="headerlink" title="3.2 协同过滤"></a>3.2 协同过滤</h2><p>协同过滤做的是一件什么事？协同过滤根据用户的历史数据，计算用户之间的相似度，计算item之间的相似度，然后基于这些相似度给用户做推荐。协同过滤强依赖用户行为！协同过滤强依赖用户行为！协同过滤强依赖用户行为！</p>
<p>协同过滤分为基于用户的协同过滤和基于物品的协同过滤。</p>
<p>协同过滤的思想：<br>1）抽象一点，物以类聚，人以群分。<br>2）具体一点，西蓝花和短短都很喜欢健身，也都很喜欢好看的legging和运动背心，短短买了一件新款legging，西蓝花也有很大可能喜欢。</p>
<h3 id="3-2-1-用户协同过滤（user-to-user-collaborative-filtering）"><a href="#3-2-1-用户协同过滤（user-to-user-collaborative-filtering）" class="headerlink" title="3.2.1 用户协同过滤（user-to-user collaborative filtering）"></a>3.2.1 用户协同过滤（user-to-user collaborative filtering）</h3><p><img src="https://kerryli1007.github.io/images/推荐策略产品必备技能之推荐算法原理（上）/2.png" alt><br>上述截图页面，就是一个典型的用户协同过滤页面，购买过《深度学习推荐系统》的人还购买过什么。<br>一点题外话，仔细分析一下这个推荐页面，可以发现这个推荐是没有经过业务逻辑处理的。</p>
<p>原因有2:<br>1）《深度学习推荐系统》是我目前已经加购到购物车的商品；<br>2）《智能搜索和推荐系统：原理、算法与应用》《推荐系统与深度学习：新时代技术新未来》是我过去两周才购买了的商品。</p>
<p>不过，或许京东推荐团队有其他考虑～</p>
<p>用户协同过滤更详细流程：<br>1）找到和目标推荐用户相似的用户群A；<br>2）找到用户群A购买的商品集合B；<br>3）从商品集合B中减目标用户已经购买过的商品，得到C；<br>4）计算商品合计C中商品，目标用户的点击率；<br>5）最后添加一些业务逻辑规则</p>
<p>比如豆瓣电影的“喜欢这部电影的人也喜欢”</p>
<p><img src="https://kerryli1007.github.io/images/推荐策略产品必备技能之推荐算法原理（上）/3.png" alt></p>
<h3 id="3-2-2-物品协同过滤（item-to-item-collaborative-filtering）"><a href="#3-2-2-物品协同过滤（item-to-item-collaborative-filtering）" class="headerlink" title="3.2.2 物品协同过滤（item-to-item collaborative filtering）"></a>3.2.2 物品协同过滤（item-to-item collaborative filtering）</h3><p>物品协同过滤的核心是给用户推荐那些和他们喜欢的物品相似的物品。</p>
<p><img src="https://kerryli1007.github.io/images/推荐策略产品必备技能之推荐算法原理（上）/4.png" alt></p>
<p>比如当当网的经常一起购买的商品。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/05/26/推荐策略产品必备技能之推荐系统框架（下）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/26/推荐策略产品必备技能之推荐系统框架（下）/" class="post-title-link" itemprop="url">推荐策略产品必备技能之推荐系统框架（下）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-26 00:00:00" itemprop="dateCreated datePublished" datetime="2021-05-26T00:00:00+08:00">2021-05-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-06 00:30:56" itemprop="dateModified" datetime="2021-07-06T00:30:56+08:00">2021-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/推荐策略产品必备技能/" itemprop="url" rel="index"><span itemprop="name">推荐策略产品必备技能</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在上一篇，我们聊了推荐系统框架是怎么样一回事，在本篇，我们来学习一下数据流。</p>
<h2 id="一、概括"><a href="#一、概括" class="headerlink" title="一、概括"></a>一、概括</h2><p>为什么要了解数据流？</p>
<p>对于一款非常复杂的产品，比如像推荐系统这块由多个模块组成的产品，只有了解了其数据流，才能知道这个系统是如何运作的。</p>
<p>对于产品经理自身而言，只有了解了整体数据流，才能增强自己对复杂产品设计的把控能力。</p>
<h2 id="二、推荐系统数据流"><a href="#二、推荐系统数据流" class="headerlink" title="二、推荐系统数据流"></a>二、推荐系统数据流</h2><h3 id="1-背景Brief"><a href="#1-背景Brief" class="headerlink" title="1. 背景Brief"></a>1. 背景Brief</h3><p>要了解推荐系统的数据流，首先需要知道，对于一个推荐系统，主要的数据模块。可以将其抽象成3个模块：用户数据、物料数据、用户行为。</p>
<h3 id="2-推荐系统目标"><a href="#2-推荐系统目标" class="headerlink" title="2. 推荐系统目标"></a>2. 推荐系统目标</h3><p>对于一个推荐系统，它的目标是什么？通过两个case来了解。</p>
<p><strong>1）Case 1：资讯场景</strong></p>
<p>比如资讯场景业务目标是点击率。点击率的计算逻辑 = click / show。</p>
<p>那为了提升点击率，我们需要哪些数据实现目标？</p>
<ul>
<li>静态数据：用户表、物料表。</li>
<li>用户行为数据：用户行为数据。</li>
</ul>
<p>聚焦到用户行为数据，如何定义哪些是正样本、哪些是负样本。</p>
<p><img src="https://kerryli1007.github.io/images/推荐策略产品必备技能之推荐系统框架（下）/1.jpg" alt></p>
<p>需要注意的是，在行为数据定义时候（样本定义时候），经常出现的几个show虚报的问题：</p>
<ol>
<li>推荐结果即show。推荐结果即show的意思是，比如一个相关推荐场景，后台服务器一次给出的预测结果是10条数据，客户端只展现了4条。为了图方便，客户的上报show的逻辑是将所有的返回推荐结果都上报为show。</li>
<li>加载即show。在信息流场景，往往需要预加载。但是很多预加载的item，实际上尚未被展示。客户的埋点逻辑是加载即上报show，因此会导致show虚高。</li>
<li>信息流上下滑动。在信息流场景，还经常出现的一个问题是，用户经常上下刷动，所以同一物料会有多次曝光，建议上报时候做去重设置。</li>
</ol>
<p><strong>2）Case 2：小视频场景</strong></p>
<p>比如小视频场景，建模目标是完播率，即视频的播放时长/视频的总时长。</p>
<h3 id="3-推荐系统如何实现业务目标"><a href="#3-推荐系统如何实现业务目标" class="headerlink" title="3. 推荐系统如何实现业务目标"></a>3. 推荐系统如何实现业务目标</h3><p>将推荐系统实现业务目标拆分成两条数据流来理解，在线数据流和离线数据流。</p>
<p><strong>1）在线数据流</strong></p>
<p>在线数据流是指一个请求进入到推荐系统到给出预估结果的流程，参考下述示例图。</p>
<p>接着进一步了解在线数据流。</p>
<p>用户来到APP，打开APP，这个时候前端会像服务器后端发送请求，接着服务器后端会像推荐系统（SaaS服务）发送请求。</p>
<p>推荐服务接受到这个请求，会先进行load balance，接着后端处理，在后端处理分为算法和规则，算法即召回和排序，规则即rerank。</p>
<p>根据2.2的描述，我们知道，对于一个推荐系统来说，都有其特定的目标，当我们完成目标确认后，比如提升点击率或者完播率。</p>
<p>接着就可以开始建模了。假设模型已经ready。来看一下推荐系统的在线流程～</p>
<p><img src="https://kerryli1007.github.io/images/推荐策略产品必备技能之推荐系统框架（下）/2.jpg" alt></p>
<ul>
<li>召回（Recall）：召回的作用是从整个物料库中，通过某一种/多种策略，快速召回一小批物料，供后续模型打分使用。</li>
<li>排序（Rank）：排序是将前一个阶段召回的物料进行模型排序。</li>
<li>重排（Rerank）</li>
</ul>
<p>重排是什么？</p>
<p>重排是基于排序环节的打分结果，对上述结果再次进行排序。</p>
<p>为什么需要重排？</p>
<p>在上一个环节，排序做的事本质上是预测用户对物品该兴趣的概率，考虑的只是物品与用户之间的关系，但是忽略掉了物品之间的相关性。</p>
<p>如何理解呢？分享一个极端的case，小红最近酷爱刷电影剪辑类小视频，模型学习的话，很可能学出来最后给用户推荐的都是同一个publisher的10条item。</p>
<p>这样肯定是不行的，试想，如果你正在刷抖音，连续10条都给你推荐同一个博主的内容，这个体验能好吗？所以需要rerank。</p>
<p>重排环节一般会做什么？</p>
<p>重排阶段是个策略出没之地，就是集中了各种业务和技术策略。比如为了更好的推荐体验，这里会加入去除重复、结果打散增加推荐结果的多样性、强插某种类型的推荐结果等等不同类型的策略。</p>
<p><strong>2）离线</strong></p>
<p>什么是离线数据流呢？模型训练以及模型的更新都是离线数据流完成的事。</p>
<p>离线模型的训练以及模型的更新，涉及到多个数据模块的配合，包括用户画像、物料画像、行为日志，离线数据流，我们下章节见～</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/05/23/推荐策略产品必备技能之推荐系统框架（上）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/23/推荐策略产品必备技能之推荐系统框架（上）/" class="post-title-link" itemprop="url">推荐策略产品必备技能之推荐系统框架（上）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-23 00:00:00" itemprop="dateCreated datePublished" datetime="2021-05-23T00:00:00+08:00">2021-05-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-06 00:17:20" itemprop="dateModified" datetime="2021-07-06T00:17:20+08:00">2021-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/推荐策略产品必备技能/" itemprop="url" rel="index"><span itemprop="name">推荐策略产品必备技能</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本模块的目标：</p>
<ol>
<li>梳理推荐系统框架</li>
<li>梳理推荐系统框架中的各个模块的实现</li>
<li>理解推荐系统的数据流</li>
</ol>
<p>一个推荐系统，大致分为4层，分别是离线层、存储层、近线层和在线层。<br>离线、近线和在线的区分在于响应用户行为的速度差异。</p>
<p>一个经典的Web推荐系统的架构，主要包括如下四部分：</p>
<ol>
<li>推荐服务：该服务从Web服务器获取推荐请求，然后返回推荐结果。</li>
<li>存储系统：这些系统存储用户特征、物品特征和模型参数，为了方便检索，也存储了物品索引。</li>
<li>离线学习：<ol>
<li>该组建从用户行为数据中学习模型参数，然后按照一定的周期将参数推送到在线存储系统中。</li>
<li>物品特征学习</li>
<li>用户特征学习</li>
</ol>
</li>
<li>在线学习：</li>
</ol>
<p><strong>推荐服务模块</strong>的功能是对来自业务的request进行预测。比如，我这会打开抖音，抖音后台会发送一个request给服务器，服务器接收到这个request之后，会根据过去我在抖音上的行为偏好，为我推荐向我可能感兴趣的短视频。</p>
<p><strong>存储系统</strong>的功能是存储用户特征、物品特征、以及物品索引。</p>
<p><strong>离线学习</strong>的功能包括：模型训练、物品特征、用户特征计算。</p>
<ul>
<li>模型训练是指给定用户和物品，以及用户对该物品的响应数据，来训练模型参数，这个过程一般需要耗费好几个小时的时间。</li>
<li>物品特征是比如对于非结构化数据，经常需要对这些数据进行TF_IDF计算，这个也是在离线层进行。</li>
<li>用户特征也是。</li>
</ul>
<p><strong>在线学习</strong> 的功能是利用用户的即时数据进行预估。<br>来看一个经典的推荐系统架构的设计</p>
<p><img src="https://kerryli1007.github.io/images/推荐策略产品必备技能之推荐系统框架（上）/1.jpg" alt></p>
<p>这是Netflix的推荐系统架构，这个架构的设计目标是：<br>1）支持好的用户体验，且能支持快速的迭代；<br>2）针对用户的行为，作出快速的响应。</p>
<p>在这个设计中，计算被分为了离线、近线和在线。</p>
<p>计算可以离线进行、近线进行、也可以在线进行。对于用户产生的最新行为，在线计算能更好地进行反馈，但是在线必须实时进行反馈。这样的话，就对算法的计算复杂性有很大的限制，同时，也会限制能处理的数据量。</p>
<p>离线训练能处理较大的数据量，且不要求必须是实时的。模型的更新一般是离线进行的，在模型的前后两次更新这个时间窗口中，由于没有进入新的数据，所以这个模型一直使用的是旧的数据。对于推荐系统架构最关键的因素是如何将在线和离线计算无缝结合。</p>
<p>近线计算是在上述两者之间，在近线计算，我们可以执行类似在线的计算，但不要求实时响应。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/05/22/我理解的推荐策略产品的必备技能/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/22/我理解的推荐策略产品的必备技能/" class="post-title-link" itemprop="url">我理解的推荐策略产品之必备技能</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-22 00:00:00" itemprop="dateCreated datePublished" datetime="2021-05-22T00:00:00+08:00">2021-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-04 23:51:27" itemprop="dateModified" datetime="2021-07-04T23:51:27+08:00">2021-07-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/推荐策略产品/" itemprop="url" rel="index"><span itemprop="name">推荐策略产品</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>梳理我对推荐策略产品的理解。</p>
<p>一个60分的推荐策略产品经理，我认为，至少需要具备如下能力模型：</p>
<ol>
<li>推荐系统框架</li>
<li>推荐算法原理</li>
<li>业务产品设计</li>
<li>数据分析能力</li>
<li>项目管理能力</li>
</ol>
<p>对推荐系统框架的理解，至少需要掌握：a 推荐系统架构； b 整个推荐系统的数据流。<br>对推荐算法原理的理解，至少需要：a 了解CTR常见算法，以及其演化历史；b 对各种算法策略的适用场景，优缺点有自己的思考<br>业务产品设计，这一层比较抽象，我的理解是说，产品需要了解自己产品上用户的特性，根据用户的特性，设置对应的推荐场景，并根据数据表现，调整该场景的策略，这就是能力模型4的数据分析能力。<br>最后一个能力是项目管理能力，项目管理能力是很多产品经理都忽略了的能力。在项目管理这一层能力上，我主要想强调的是：a 资源协调能力；b 风险管理能力</p>
<p>对每个能力的阐述，我都会按照从理论到实践的套路来阐述。废话不多说，让我们开始吧～Enjoy。想写推荐策略产品经理的话题</p>
<p>PS：有一段时间了，一直都没有好的思路，最近深入经营我的抖音账号，粉丝超过了1000，开通了创作者服务平台，在数据中心，有一个账号诊断模块，从5个纬度分析了我的账号，分别是播放量、完播率、粉丝净增、投稿活跃度，和互动指数，如下图。这也是我将策略产品经理的必备技能拆分为上述5个维度的灵感来源。</p>
<p><img src="https://kerryli1007.github.io/images/我理解的推荐策略产品的必备技能/1.jpg" alt></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/05/09/2021_Q2_Week5_工作总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/09/2021_Q2_Week5_工作总结/" class="post-title-link" itemprop="url">2021_Q2_Week5_工作总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-05-09 00:00:00 / 修改时间：15:51:09" itemprop="dateCreated datePublished" datetime="2021-05-09T00:00:00+08:00">2021-05-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index"><span itemprop="name">工作</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本周工作关键词：工作效率、团队赋能</p>
<p>在上周的工作总结，我有强调到，对于未来我每周写的工作总结，会对模版有调整。具体来说，是都要包括如下2部分：</p>
<ol>
<li>方法论</li>
<li>干货篇<br>同样在方法论和干货篇中，会特别突出强调WHY。</li>
</ol>
<h1 id="一-方法论"><a href="#一-方法论" class="headerlink" title="一 方法论"></a>一 方法论</h1><h2 id="1-1-提升工作效率"><a href="#1-1-提升工作效率" class="headerlink" title="1.1 提升工作效率"></a>1.1 提升工作效率</h2><p>为什么要提升工作效率？</p>
<p>答案是不言而喻的。</p>
<p>如何才能提升工作效率呢？从自己的工作中，我总结了一些经验。这些经验，可以<br>1）目标量化<br>2）规划具体到天粒度<br>3）提前将任务的操作步骤制定</p>
<p>因为上述经验的应用case，涉及到工作细节，就不在周报中详细描述。</p>
<h2 id="1-2-为团队赋能"><a href="#1-2-为团队赋能" class="headerlink" title="1.2 为团队赋能"></a>1.2 为团队赋能</h2><p>研发leader最近和我沟通了一下我的工作。</p>
<p><img src="https://kerryli1007.github.io/images/2021_Q2_Week5_工作总结/1.png" alt></p>
<p>总结一下就是<br>1）不能事事都我自己干，最后我很牛逼了，但是别人没有成长<br>2）当我事事都自己干，这样项目和产品的blocker就在于我</p>
<p>具体怎么做呢<br><img src="https://kerryli1007.github.io/images/2021_Q2_Week5_工作总结/2.png" alt></p>
<p>可预期的结果是什么呢？</p>
<p><img src="https://kerryli1007.github.io/images/2021_Q2_Week5_工作总结/3.png" alt></p>
<h1 id="二-干货篇"><a href="#二-干货篇" class="headerlink" title="二 干货篇"></a>二 干货篇</h1><h2 id="1-1-报错code与问题定位"><a href="#1-1-报错code与问题定位" class="headerlink" title="1.1 报错code与问题定位"></a>1.1 报错code与问题定位</h2><p>HTTP Status Code是用以表示网页服务器超文本传输协议响应状态的3位数字代码。</p>
<p>更多细节参考 <a href="https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81" target="_blank" rel="noopener">HTTP状态码 - 维基百科，自由的百科全书</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/05/09/工作就是去解决问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/09/工作就是去解决问题/" class="post-title-link" itemprop="url">价值就是去解决问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-05-09 00:00:00 / 修改时间：15:49:12" itemprop="dateCreated datePublished" datetime="2021-05-09T00:00:00+08:00">2021-05-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index"><span itemprop="name">工作</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一、为什么想到写这个话题"><a href="#一、为什么想到写这个话题" class="headerlink" title="一、为什么想到写这个话题"></a>一、为什么想到写这个话题</h1><p>最近看玉伯的文章《价值就是去解决问题》，摘录了其中和我价值观高度一致的两段话。</p>
<blockquote>
<p><strong>一个岗位的价值，就看能帮助公司解决多少问题</strong>。蚂蚁的产品体验，特别是商家侧的用户体验，很痛，设计师是否能推动各方去解决这些痛点？很难，但本就没有容易的事。一年推动不起来，就推动两年，两年不行就再花五年去推动，不断找人去聊，去一点一点解决，<strong>帮助公司解决的问题越大，价值就越大</strong>。价值做出来，加薪晋升等等就是自然而然的事。不用去抱怨什么，去比较什么，多想想怎么解决更多问题，去为公司为客户产生更大价值。</p>
</blockquote>
<blockquote>
<p><strong>解决问题能获得巨大的满足感和成就感</strong>，比其他事情有意思多了。这种满足感，会让人着迷，会活着活着发现解决问题就是人生的意义所在。获得满足感不一定能获得幸福感，幸福感是一个更高级的词汇，<strong>成就感是由己及他的满足，幸福感是由他及己的福报</strong>。去帮助到的人越多，流动的情感就会越多。</p>
</blockquote>
<p>因为觉得这两段话非常符合我的价值观，所以也想展开并结合我自己的工作聊一聊。</p>
<h1 id="二、“挺好的呀，你就是来帮他解决问题的，这就是你的价值。”"><a href="#二、“挺好的呀，你就是来帮他解决问题的，这就是你的价值。”" class="headerlink" title="二、“挺好的呀，你就是来帮他解决问题的，这就是你的价值。”"></a>二、“挺好的呀，你就是来帮他解决问题的，这就是你的价值。”</h1><p>我于4月1日加入了公司另一个部门。</p>
<p>4月中旬，我在电梯口遇到了公司交付负责人。她笑着和我说：“我看你在新部门表现挺好的，在某某项目上，很不错”。我笑着摇摇头说：“不算好，这个项目还是有很多问题。”她接着说：“你的价值就是来帮某某（部门老大）解决问题的呀。等你能把所有项目上的问题都解决了，不事事都去麻烦某某（部门老大），你就成长了，你也能创造更大的价值。“</p>
<p>是。我的价值完全取决于我能解决多大的问题。</p>
<p>恍惚间，觉得这一两年的成长太大了。以前总是害怕遇到问题，问题还没有发生，我自己都把自己吓死了。现在面对问题，已经完全没了恐惧。</p>
<p>我有一名好友，推荐领域的算法工程师，前不久被B站以高薪挖走，需要离开北京去上海。在他临走前，一起吃了顿饭。</p>
<p>饭桌上，我问他，你对什么负责？<br>他说，业务指标啊，比如人均浏览时长啥的。<br>我手，你觉得有什么样的能力，让你能对这些指标负责。（其实我本来想问一些干货<br>他的回答说，要是不能对这些负责，我要不直接和老板说我不干了。（哈哈哈</p>
<p>言归正传。有问题，才有机会。能解决多大的问题，就能创造多大的价值。</p>
<h1 id="三、如何才能解决问题"><a href="#三、如何才能解决问题" class="headerlink" title="三、如何才能解决问题"></a>三、如何才能解决问题</h1><p>这是一个很大的话题，我只能凭借自己的经验，尝试寻找其中的规律，做一些总结。</p>
<h2 id="心态"><a href="#心态" class="headerlink" title="心态"></a>心态</h2><p>我觉得能做到解决问题的第一步，一定是心态上的调整。从害怕遇到问题，到遇到问题，沉稳淡定。</p>
<p>周五晚上，坐在研发leader旁边（最近我都把工位搬去了研发身边，哈哈哈），他问我，我看你朋友圈发了最近都很开心，你为啥都那么开心？我想了想说，每天解决问题，也是快乐的来源呀。他说，那不错，你的底层操作系统很好。</p>
<p>其实就是心态，每天工作中有很多问题，遇到问题的时候，我是将其视为，解决了这个问题，我职场技能又提升了，还是将其视为我不顺职场路的来源，这两种心态，有本质的区别。我觉得这是最关键的影响。</p>
<h2 id="硬技能"><a href="#硬技能" class="headerlink" title="硬技能"></a>硬技能</h2><p>在这里的硬技能，我着重想分享的是，思路。</p>
<p>解决问题的过程中，会发现，问题和问题之间，相互关联。所以，在解决问题的过程中，需要<br>1）明确我要解决的问题是什么，或者说我的假设是什么<br>2）和这个问题相关的，我收集到的信息有哪些<br>3）为了验证我的假设，我需要做什么，每一步的假设是什么，每一步的产出是什么？</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kerryli1007.github.io/2021/05/05/2021_Q2_Week4_工作总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="一颗西蓝花🥦">
      <meta itemprop="description" content="AI/思考/学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一颗西蓝花🥦">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/05/2021_Q2_Week4_工作总结/" class="post-title-link" itemprop="url">2021_Q2_Week4_工作总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-05-05 00:00:00 / 修改时间：14:52:38" itemprop="dateCreated datePublished" datetime="2021-05-05T00:00:00+08:00">2021-05-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index"><span itemprop="name">工作</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>很久没有写工作总结了，得拾起来。</p>
<p>本周关键词：数据流、解决问题、埋点</p>
<h1 id="一、数据流"><a href="#一、数据流" class="headerlink" title="一、数据流"></a>一、数据流</h1><p>年初时候，和商汤的一位PM沟通。彼时的我，还在负责云OCR的GTM。</p>
<p>当时我们的沟通内容如下。</p>
<p>商汤PM：你知道你负责的OCR返回的结果是什么吗？</p>
<p>我：我知道，是对文本的所见即所得的识别内容。</p>
<p>商汤PM：他们是什么样的形式存在？这个你了解吗？</p>
<p>我：你指的形式具体是指的什么？</p>
<p>商汤PM：你的ocr识别结果是什么？</p>
<p>我：是一个json文件。</p>
<p>商汤PM：这个json文件中，包含哪些部分。客户请求的时候，这个json中有哪些部分，你返回给客户的json中有哪些部分。</p>
<p>我瞬间明白，商汤PM在这里问我的是，我的云ocr服务是如何与客户产生交互。</p>
<p>在回答上述问题之前，我想recap两个知识点，分别是软件集成和HTTP。</p>
<h2 id="1-1-软件集成"><a href="#1-1-软件集成" class="headerlink" title="1.1 软件集成"></a>1.1 软件集成</h2><p>去年冬天，和NLP Leader沟通我们为客户提供服务时候，他和我讲到，当客户想将我们的AI能力，集成到他们的系统，有两种方式：一是直接将我们的代码写进他们的系统，二是调用我们的API。前者成本高昂，所以在实际业务中，我们接触更多的是后者。那么后者就需要，双方对彼此接口的内容，做一致的约定。</p>
<p>这里涉及到一个知识点，叫做软件架构。划重点，软件架构。</p>
<p>应用程序架构的关注点是应用程序，通常包括将应用程序解构为类和组件，确保设计模式的正确应用。本质上应用程序架构谈论的是软件设计的低级别切面。</p>
<p>系统架构是更大规模的应用程序架构。大多数软件系统实际上是由横跨不同层次和技术的多个应用程序组成。举个例子，你可能有这样一个软件系统，Java EE中间层消费Oracle数据库提供的数据，同时向.NET Silverlight客户端提供Web服务。每个部分都有自己的应用程序架构。</p>
<p>要让整个软件系统工作起来，就要思考如何组合这些单独的应用程序。换句话说，要有端到端的软件系统在较高层次上的整体结构。大多数软件系统都不是孤立的，因此系统架构还关注互操作系统和与环境中其他系统的集成。</p>
<p>《程序员必读之软件架构》</p>
<h2 id="1-2-HTTP"><a href="#1-2-HTTP" class="headerlink" title="1.2 HTTP"></a>1.2 HTTP</h2><p>接口调用。接口调用在我工作中，太常见了。常见到我都以为，我完全了解接口调用是怎么一回事，其实并没有。对于接口调用，我是说不出来123的。讲一个题外话，如何在简单的工作交流中，让别人知道，你有没有点东西。我的理解就是，在和别人沟通一个问题的时候，要讲出一个123。上周就接口调用的问题和我司一位非常厉害的架构师沟通。在我阐述了我的困惑之后，他逻辑非常清晰地讲出了，要解决这个问题，我要做的步骤123，以及每个步骤的背后逻辑。（</p>
<p>言归正传，回到接口调用。首先，理解一下接口调用是一件什么事？API是一件属于网络基础的事。</p>
<p>Web浏览器、服务器和相关的Web应用都是通过HTTP相互通信。HTTP是现代全球因特网中使用的公共语言。</p>
<h3 id="1-2-1-HTTP-——因特网的多媒体信使"><a href="#1-2-1-HTTP-——因特网的多媒体信使" class="headerlink" title="1.2.1 HTTP ——因特网的多媒体信使"></a>1.2.1 HTTP ——因特网的多媒体信使</h3><h3 id="1-2-2-Web客户端和服务器"><a href="#1-2-2-Web客户端和服务器" class="headerlink" title="1.2.2 Web客户端和服务器"></a>1.2.2 Web客户端和服务器</h3><p>Web内容都是存储在Web服务器上的。Web服务器所使用的是HTTP协议，因此经常会被称为HTTP服务器。</p>
<h3 id="1-2-3-资源"><a href="#1-2-3-资源" class="headerlink" title="1.2.3 资源"></a>1.2.3 资源</h3><p>一个HTTP事务由一条请求命令和一个响应结果组成。这种通信是通过名为HTTP报文（HTTP message）的格式化数据块进行。</p>
<p>HTTP支持不同的请求命令，这些命令被称为HTTP方法（HTTP method）</p>
<p>每个HTTP响应报文返回时都会携带一个状态码。状态码是一个三位数的代码，告知客户端请求是否成功。</p>
<p>那HTTP的设计思路是什么样的呢？</p>
<p>在报文编码方式上，HTTP采用了面向程序员的文本（ASCII）编码方式而非面向计算机的二进制编码方式。</p>
<blockquote>
<p>HTTP是无状态的请求-应答协议。无状态的设计是个严重缺乏前瞻性的设计，但考虑到在HTTP诞生之初网上没有什么资源，也根本不存在可以跟用户交互的网站，因此这个设计思路也是完全可以理解的。最初的HTTP（0.9版）只提供了GET方法，这是因为其作者认为网上所有的资源（网页）都是静态的，远程用户是不能修改的，浏览器所能做的就是从远程服务器上“获取（GET）”指定网页并以只读方式展示给用户，在用户获取网页之后就立即中断与服务器的连接，从而节省宽带与服务器的宝贵资源。</p>
<p>随着Internet的加速发展，特别是图片和音视频等多媒体内容的出现和流行，原先只面向文本资源对象的HTTP已不能满足人们的需求，所以HTTP做了一个较大的升级（1.0版）：首先，增加了POST方法，使得客户端可以i提交（上传）文件到服务器端；其次，通过引入Content-Type这个Header，支持除文本外的多媒体数据的传输支持。</p>
</blockquote>
<p>《架构解密：从分布式到微服务》</p>
<h2 id="1-3-回答商汤PM的问题"><a href="#1-3-回答商汤PM的问题" class="headerlink" title="1.3 回答商汤PM的问题"></a>1.3 回答商汤PM的问题</h2><p>梳理了软件集成和HTTP之后，我来尝试回答商汤PM的问题</p>
<h3 id="1-3-1-客户请求"><a href="#1-3-1-客户请求" class="headerlink" title="1.3.1 客户请求"></a>1.3.1 客户请求</h3><p>客户请求类型：Post。</p>
<p>请求代码，涉及隐私内容已删除！</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">from</span> requests <span class="keyword">import</span> post</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">flask_server = <span class="string">'https://ocr.xilanhua.com'</span></span><br><span class="line">predict_url = os.path.join(flask_server, <span class="string">'/ocr/predict/ticket'</span>)</span><br><span class="line">headers =\</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"Authorization"</span>: <span class="string">"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJiNWszTjBTanpaWTMtSVNOMk5jYlpwWXU3UERVS3FWWU82T2l4OWlkdUxBIn0.eyJleHAiOjE2MTc5Mzc5MzMsImlhdCI6MTYxNTM0NTkzMywianRpIjoiMGRlYmM5MWMtODNhNi00NjU5LWE4M2YtMDI3MWZhNGFjMWYzIiwiaXNzIjoiaHR0cHM6Ly9zc28uY2xvdWQuNHBhcmFkaWdtLmNvbS9hdXRoL3JlYWxtcy9BdXRvT0NSIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjEwM2NlMzMwLTk2N2UtNDE3Mi04YzE1LTYzNzYzMGRjZWQ3NyIsInR5cCI6IkJlYXJlciIsImF6cCI6Im9jcmNsaWVudCIsInNlc3Npb25fc3RhdGUiOiI0NmM5ZDA3Yi04MGVjLTQ0MzQtYTQ5My0yNTQ4MzM4NGM3ZjYiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50IQ"</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">general_predict</span><span class="params">(image_path, scene, edge_size=<span class="number">0</span>, do_recognition=<span class="string">'True'</span>, row_range_flag=<span class="string">'False'</span>, vis_flag=<span class="string">'False'</span>)</span>:</span></span><br><span class="line">    <span class="keyword">with</span> open(image_path, <span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        cnt = f.read()</span><br><span class="line">        x = base64.b64encode(cnt)</span><br><span class="line">        image_jpeg_base64 = x.decode(<span class="string">'ascii'</span>).replace(<span class="string">'\n'</span>, <span class="string">''</span>)</span><br><span class="line">    data = &#123;&#125;</span><br><span class="line">    data[<span class="string">'image'</span>] = image_jpeg_base64</span><br><span class="line">    data[<span class="string">'scene'</span>] = scene</span><br><span class="line">    data[<span class="string">'edge_size'</span>] = edge_size</span><br><span class="line">    data[<span class="string">'do_recognition'</span>] = do_recognition</span><br><span class="line">    data[<span class="string">'row_range_flag'</span>] = row_range_flag</span><br><span class="line">    data[<span class="string">'vis_flag'</span>] = vis_flag</span><br><span class="line">    res = post(predict_url, data=data, headers = headers).json()</span><br><span class="line">    print(res)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">general_predict(<span class="string">'./test.jpg'</span>, <span class="string">'idcard'</span>,edge_size=<span class="number">0</span>, do_recognition=<span class="string">'True'</span>, row_range_flag=<span class="string">'False'</span>, vis_flag=<span class="string">'False'</span>)</span><br></pre></td></tr></table></figure>
<p>客户请求的地址，是一个flask server。</p>
<p>客户在请求时候，会传过来一段header，这个header就相当于开门的钥匙，有了这个密钥，服务才会正常响应。</p>
<p>最后，客户是将图片内容进行了base64编码，然后post给服务器。</p>
<h3 id="1-3-2-服务返回"><a href="#1-3-2-服务返回" class="headerlink" title="1.3.2 服务返回"></a>1.3.2 服务返回</h3><p>最近服务器迁移中。后续补上。</p>
<p>上面讲了很多东西，但是都只是搬砖引入，讲API的目的也是为了引出数据流，没错这才是主菜。上述主要是想讲述，数据流。</p>
<p>为什么在这里要讲数据流。从业务上来说，我是搞SaaS的，基本上为客户提供服务，都是基于API为客户提供服务，那么客户如何请求我们的服务，他们都传给了我们什么数据，这些数据传到我们服务器端上之后，有哪些阶段。相信我，对数据流的了解，是开展业务的首要前提。</p>
<p>因为在实际开展业务中，会遇到很多问题，比如响应时长、比如数据落盘问题。</p>
<p>举个例子，比如响应时长过长，需要优化？怎么优化呢？第一步，我们需要将整个客户端-服务器端的链路梳理出来，这个链路有多长，经过哪些环节，每个环节，业务逻辑是什么，处理时长是多长？</p>
<p>在举个例子，数据落盘，这个数据从进来，到罗盘都流过了哪些环节，每个环节都在做什么？为什么有这些环节？</p>
<h1 id="二、解决问题"><a href="#二、解决问题" class="headerlink" title="二、解决问题"></a>二、解决问题</h1><p>上面讲了数据流，工作中遇到的问题蛮多的，如果要对这些问题进行一下分类：</p>
<ol>
<li>数据</li>
<li>业务</li>
</ol>
<p>目前的我，应该是会将其分为数据和业务。</p>
<p>数据是算法的基石，而对业务上下游的梳理，则是开展算法策略的前提，数据和业务理解，两者缺一不可。但是在实际开展工作中，我们经常会遇到这样或者那样的问题。不管遇到什么问题，我们在解决问题时候，都应该按照以下思维模型来进行（这是我总结的一个解决问题的<strong>思维模型</strong>）</p>
<p>1）要解决的问题是什么/目标是什么？</p>
<p>2）当前收集到的信息有哪些？这些信息之间的关系是什么？</p>
<ul>
<li>业务上下游？</li>
<li>数据上下游？</li>
</ul>
<p>3）根据当前的目标和信息，接下来要实现目标，我的action是什么？这些action分别需要谁的支持，在什么时间点，主要产出分别是什么？</p>
<h1 id="三、埋点"><a href="#三、埋点" class="headerlink" title="三、埋点"></a>三、埋点</h1><h2 id="3-1-埋点是啥"><a href="#3-1-埋点是啥" class="headerlink" title="3.1 埋点是啥"></a>3.1 埋点是啥</h2><p>有一个问题哈？埋点就是数据采集吗？</p>
<p>其实数据采集标准动作有三步：埋点、采集、上报。也就是说一组数据从产生到接入存储必经三个步骤</p>
<h3 id="埋点"><a href="#埋点" class="headerlink" title="埋点"></a>埋点</h3><p>埋点只是数据采集的一个动作。</p>
<h3 id="采集"><a href="#采集" class="headerlink" title="采集"></a>采集</h3><p>一旦埋点被用户触发，数据就会产生，采集动作将捕获这些数据，做初步的格式化、组装、暂存、为上报动作做准备。</p>
<p>格式化和组装是为接下来的上报动作提供便利；暂存是为了配合上报动作的节奏。</p>
<h3 id="上报"><a href="#上报" class="headerlink" title="上报"></a>上报</h3><p>经过采集的数据从用户产品被送到数据接入层的动作过程就是上报。只有完成了上报，一个数据才算进入了数据产品体系。</p>
<p>数据到达接入层后会经历解包和解析、格式转换、数据清洗、数据存储四大技术流程。</p>
<ul>
<li>数据解包和解析</li>
</ul>
<p>根据数据协议的约定，采集层在上报数据前将魅族数据以特定的格式拼装，经过压缩上传到接入层，这样可以提高数据传输的效率。数据上传至接入层后便要进行响应的反向操作，即解包（对应压缩）和解析（对应拼装）</p>
<ul>
<li>格式转换</li>
</ul>
<p>由于解析后的数据类型与数据Topic定义的逻辑类型存在差异，这就需要根据数据Topic的定义，将每个分量转换类型和格式。</p>
<ul>
<li><p>数据清洗</p>
</li>
<li><p>数据存储</p>
</li>
</ul>
<p>数据仓库是实现数据存储的重要技术手段。</p>
<p>《 产品经理数据修炼30问》</p>
<h2 id="3-2-为什么需要埋点？埋点的重要性是什么？"><a href="#3-2-为什么需要埋点？埋点的重要性是什么？" class="headerlink" title="3.2 为什么需要埋点？埋点的重要性是什么？"></a>3.2 为什么需要埋点？埋点的重要性是什么？</h2><p>埋点上报作为数据统计分析的基础，一定要100%准确。</p>
<blockquote>
<p>用户行为分析平台就是对用户在App或网站浏览、点击等这些行为进行大数据统计分析，发现用户使用产品的行为规律、对产品功能的使用喜好程度，把这些结果应用于产品的营销、运营中。</p>
<p>用户行为，是指用户使用App、小程序或者web程序所产生的点击和浏览等交互行为。</p>
</blockquote>
<h2 id="3-3-业务中经常遇到的问题？"><a href="#3-3-业务中经常遇到的问题？" class="headerlink" title="3.3 业务中经常遇到的问题？"></a>3.3 业务中经常遇到的问题？</h2><p>根据我工作经验，经常遇到的问题有</p>
<p>1）埋点不考虑业务逻辑</p>
<p>2）埋点字段定义模糊</p>
<p>3）埋点数据上报不准确</p>
<p>分别举例来看看吧～（我发现网络上很多著作，都只讲抽象的概念，不讲case，非常让人讨厌</p>
<h3 id="3-3-1-埋点不考虑业务逻辑"><a href="#3-3-1-埋点不考虑业务逻辑" class="headerlink" title="3.3.1 埋点不考虑业务逻辑"></a>3.3.1 埋点不考虑业务逻辑</h3><p>业务逻辑是啥？</p>
<p>举个例子来说吧，比如在推荐领域，相关推荐。在做data check时候，发现每次都上报两条曝光数据。但是业务是什么样子的呢？</p>
<p><img src="https://kerryli1007.github.io/images/2021_Q2_Week4_工作总结/1.jpg" alt></p>
<p>真实的业务是这样的，就是每当用户下拉当前阅读文章到下面时候，B文章的展示出来且能被用户看到的部分，不过1/7，但是也是简单粗暴直接记为了show。这样说还是很抽象，我尝试再具体详细一些。</p>
<p>1）这是推荐场景的个性化推荐模块，目标是在下面给用户推荐当前用户可能感兴趣的内容，让用户点进去，提高用户的留存</p>
<p>2）在当前这篇文章下面，给用户推荐了A和B两篇文章，当用户刷到上图位置时候，就为A和B记为show。</p>
<p>问题来了，但是这个时候，用户压根看不清B的内容到底是啥？这会带来什么影响呢？</p>
<p>直接影响就是，可能用户本来感兴趣的内容B，但是因为没有有效展示出来，用户没有进行近一步的动作，所以会导致，直接将用户反馈记为了负反馈。</p>
<h3 id="3-3-2-埋点字段定义模糊"><a href="#3-3-2-埋点字段定义模糊" class="headerlink" title="3.3.2 埋点字段定义模糊"></a>3.3.2 埋点字段定义模糊</h3><p>比如在小视频场景，当用户刷到了当前时候，这个时候，这个视频的行为会有一个show，但是如果用户产生了观看行为，那么也就是说，用户在这个视频上消费了时间，这个时候，会记录一个duration，这个duration就表示用户在这个视频上产生了观看行为。</p>
<p>但是问题来了，用户在这个视频上观看了几秒，这个行为就是duration了呢？</p>
<p>大于等于1秒？</p>
<p>大于等于2秒？</p>
<p>这些都是要基于业务进行思考。</p>
<h3 id="3-3-3-埋点数据上报不准确"><a href="#3-3-3-埋点数据上报不准确" class="headerlink" title="3.3.3 埋点数据上报不准确"></a>3.3.3 埋点数据上报不准确</h3><p>埋点数据上报不准确主要有哪几种表现 ：</p>
<p>1）重复上报</p>
<p>2）动作顺序混乱，比如对于资讯，肯定是先show再有其他动作，比如click，但是经常会发现，先click再show，这就是有问题了！</p>
<h2 id="3-4-如何规避上述问题"><a href="#3-4-如何规避上述问题" class="headerlink" title="3.4 如何规避上述问题"></a>3.4 如何规避上述问题</h2><p>所以如何规避上述问题呢？</p>
<p>首先，业务，业务，业务，精通业务。</p>
<p>其次，每个字段的定义需要了然于胸。</p>
<p>最后，data check，data check，data check。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">一颗西蓝花🥦</p>
  <div class="site-description" itemprop="description">AI/思考/学习</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">105</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">一颗西蓝花🥦</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
